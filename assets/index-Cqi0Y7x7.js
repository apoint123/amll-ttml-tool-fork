import{c as At,a as ye,r as pn,b as vn,s as Ge,d as Ee,e as Oe,u as Et,f as U,g as Le,l as Ue,h as Qt,i as yn,j as wn,k as d,R as Ct,n as at,v as bn,m as $,T as le,t as ct,o as ze,p as Ft,q as Tn,S as xn,w as Ln,x as Ut,y as dt,z as St,A as it,B as Ht,C as He,D as It,E as Xt,F as _n,__tla as jn}from"./index-B3K8Wc-q.js";let Rt,An=Promise.all([(()=>{try{return jn}catch{}})()]).then(async()=>{const ut=At("AddFilled","1em",["M10 2.25c.41 0 .75.34.75.75v6.25H17a.75.75 0 0 1 0 1.5h-6.25V17a.75.75 0 0 1-1.5 0v-6.25H3a.75.75 0 0 1 0-1.5h6.25V3c0-.41.34-.75.75-.75Z"]),er=At("TextAlignRightFilled","1em",["M6 4.25c0-.41.34-.75.75-.75h10.5a.75.75 0 0 1 0 1.5H6.75A.75.75 0 0 1 6 4.25Zm-4 5c0-.41.34-.75.75-.75h14.5a.75.75 0 0 1 0 1.5H2.75A.75.75 0 0 1 2 9.25Zm7.75 4.25a.75.75 0 0 0 0 1.5h7.5a.75.75 0 0 0 0-1.5h-7.5Z"]),tr=At("VideoBackgroundEffectFilled","1em",["M6.2 4 2 8.2V6.8L4.8 4h1.4Zm7 0-1.46 1.46a3.48 3.48 0 0 0-1.02-.39L11.79 4h1.42Zm-1.08 3.17a2.51 2.51 0 0 0-2.34-1.16 2.5 2.5 0 1 0 2.34 1.16Zm.72-.72c.2.29.37.6.48.94L16.69 4 16.5 4h-1.2l-2.46 2.45ZM7.5 12c-.08 0-.15 0-.22.02A1.5 1.5 0 0 0 6 13.5V16h8v-2.5a1.5 1.5 0 0 0-1.5-1.5h-5Zm5-1c.22 0 .43.03.63.08L18 6.2V5.5c0-.2-.04-.4-.12-.59l-4.5 4.5a3.5 3.5 0 0 1-.93 1.59h.05Zm1.9.88c.23.27.4.58.5.93L18 9.7V8.29l-3.6 3.6ZM15 16v-1.2l3-3v1.4L15.2 16H15Zm-10-.3v-1.4l-1.7 1.69.2.01h1.2l.3-.3Zm1.57-6.48c.08.36.21.7.4 1.02L2.11 15.1A1.5 1.5 0 0 1 2 14.5v-.7l4.57-4.58ZM9.71 4 2 11.7v-1.4L8.3 4h1.4Z"]),Fe=t=>t,mt=t=>({_tag:"Left",value:t}),st=t=>({_tag:"Right",value:t}),rr=(t,e,r)=>r._tag==="Left"?t(r.value):e(r.value),Nt={dimap:(t,e,r)=>o=>e(r(t(o))),first:t=>([e,r])=>[t(e),r],right:t=>e=>e._tag==="Left"?e:st(t(e.value)),wander:t=>e=>e.map(t)},nr={empty:()=>{},foldMap:(t,e)=>{for(let r=0;r<e.length;r++){const o=t(e[r]);if(o!=null)return o}}},or={empty:()=>[],foldMap:(t,e)=>{let r=[];return e.forEach(o=>{r=r.concat(t(o))}),r}},ht=t=>({dimap:(e,r,o)=>n=>o(e(n)),first:e=>([r,o])=>e(r),right:e=>r=>r._tag==="Left"?t.empty():e(r.value),wander:e=>r=>t.foldMap(e,r)}),ft={Equivalence:{Equivalence:"Equivalence",Iso:"Iso",Lens:"Lens",Prism:"Prism",Traversal:"Traversal",Getter:"Getter",AffineFold:"AffineFold",Fold:"Fold",Setter:"Setter"},Iso:{Equivalence:"Iso",Iso:"Iso",Lens:"Lens",Prism:"Prism",Traversal:"Traversal",Getter:"Getter",AffineFold:"AffineFold",Fold:"Fold",Setter:"Setter"},Lens:{Equivalence:"Lens",Iso:"Lens",Lens:"Lens",Prism:"Prism",Traversal:"Traversal",Getter:"Getter",AffineFold:"AffineFold",Fold:"Fold",Setter:"Setter"},Prism:{Equivalence:"Prism",Iso:"Prism",Lens:"Prism",Prism:"Prism",Traversal:"Traversal",Getter:"AffineFold",AffineFold:"AffineFold",Fold:"Fold",Setter:"Setter"},Traversal:{Equivalence:"Traversal",Iso:"Traversal",Lens:"Traversal",Prism:"Traversal",Traversal:"Traversal",Getter:"Fold",AffineFold:"Fold",Fold:"Fold",Setter:"Setter"},Getter:{Equivalence:"Getter",Iso:"Getter",Lens:"Getter",Prism:"AffineFold",Traversal:"Fold",Getter:"Getter",AffineFold:"AffineFold",Fold:"Fold",Setter:void 0},AffineFold:{Equivalence:"AffineFold",Iso:"AffineFold",Lens:"AffineFold",Prism:"AffineFold",Traversal:"Fold",Getter:"AffineFold",AffineFold:"AffineFold",Fold:"Fold",Setter:void 0},Fold:{Equivalence:"Fold",Iso:"Fold",Lens:"Fold",Prism:"Fold",Traversal:"Fold",Getter:"Fold",AffineFold:"Fold",Fold:"Fold",Setter:void 0},Setter:{Equivalence:void 0,Iso:void 0,Lens:void 0,Prism:void 0,Traversal:void 0,Getter:void 0,AffineFold:void 0,Fold:void 0,Setter:void 0}},We=(t,e)=>{const r=e;return r._tag=t,r},kt=t=>(t._removable=!0,t);function I(t,e,r){switch(arguments.length){case 2:{const o=(n,c)=>t(n,e(n,c));return o._tag=ft[t._tag][e._tag],o._removable=e._removable||!1,o}default:{const o=ft[t._tag][e._tag],n=(c,s)=>t(c,e(c,r(c,s)));return n._tag=ft[o][r._tag],n._removable=r._removable||!1,n}}}const ir=We("Equivalence",(t,e)=>e),lt=(t,e)=>We("Iso",(r,o)=>r.dimap(t,e,o)),ge=(t,e)=>We("Lens",(r,o)=>r.dimap(n=>[t(n),n],e,r.first(o))),gt=(t,e)=>We("Prism",(r,o)=>r.dimap(t,n=>rr(Fe,e,n),r.right(o))),pt=We("Traversal",(t,e)=>t.dimap(Fe,Fe,t.wander(e))),sr=t=>We("Getter",(e,r)=>e.dimap(t,Fe,r)),Mt=(t,e,r)=>t(Nt,e)(r),lr=(t,e,r)=>t(Nt,()=>e)(r),ar=(t,e)=>t(ht({}),Fe)(e),cr=(t,e)=>t(ht(nr),Fe)(e),Pt=(t,e)=>t(ht(or),r=>[r])(e),dr=lt(t=>t.map((e,r)=>[r,e]),t=>{const e=[...t].sort((o,n)=>o[0]-n[0]),r=[];for(let o=0;o<e.length;++o)(o===e.length-1||e[o][0]!==e[o+1][0])&&r.push(e[o][1]);return r}),Dt=t=>ge(e=>e[t],([e,r])=>Object.assign(Object.assign({},r),{[t]:e})),ur=t=>ge(e=>{const r={};for(const o of t)r[o]=e[o];return r},([e,r])=>{const o=Object.assign({},r);for(const n of t)delete o[n];return Object.assign(o,e)}),Bt=t=>ge(e=>e[t],([e,r])=>{const o=r.slice();return o[t]=e,o}),vt=Bt(0),yt=t=>gt(e=>t(e)?st(e):mt(e),Fe),Xe=Symbol("__no_match__"),Gt=yt(t=>t!==Xe),zt=Symbol("__remove_me__"),wt=t=>kt(I(ge(e=>0<=t&&t<e.length?e[t]:Xe,([e,r])=>{if(e===Xe)return r;if(e===zt)return typeof r=="string"?r.substring(0,t)+r.substring(t+1):[...r.slice(0,t),...r.slice(t+1)];if(typeof r=="string")return t===0?e+r.substring(1):t===r.length?r.substring(0,t-1)+e:r.substring(0,t)+e+r.substring(t+1);{const o=r.slice();return o[t]=e,o}}),Gt)),mr=gt(t=>t===void 0?mt(void 0):st(t),Fe),hr=t=>gt(e=>t(e)?st(e):mt(e),Fe),fr=t=>kt(I(ge(e=>{const r=e.findIndex(t);return r===-1?[Xe,-1]:[e[r],r]},([[e,r],o])=>{if(e===Xe)return o;if(e===zt)return[...o.slice(0,r),...o.slice(r+1)];const n=o.slice();return n[r]=e,n}),vt,Gt)),gr=t=>I(ge(e=>{const r=e.map((o,n)=>t(o)?n:null).filter(o=>o!=null);return[r.map(o=>e[o]),r]},([[e,r],o])=>{const n=o.length,c=e.length;let s=0,f=0,m=0;const v=[];for(;s<n;)r[f]===s?(++f,m<c&&(v.push(e[m]),++m)):v.push(o[s]),++s;for(;m<c;)v.push(e[m++]);return v}),vt),pr=t=>ge(e=>e===void 0?t:e,([e,r])=>e),vr=t=>I(ge(e=>{const r=Pt(t,e);return[r,r.length]},([[e,r],o])=>{if(e.length!==r)throw new Error("cannot add/remove elements through partsOf");let n=0;return Mt(t,()=>e[n++],o)}),vt),yr=t=>ge(e=>t(e),([e,r])=>e),wr=t=>ge(e=>e,([e,r])=>t(e)),br=ge(t=>{},([t,e])=>t===void 0?e:[t,...e]),Tr=ge(t=>{},([t,e])=>t===void 0?e:[...e,t]),xr=I(lt(t=>t.split(""),t=>t.join("")),pt),Lr=I(lt(t=>t.split(/\b/),t=>t.join("")),pt,yt(t=>!/\s+/.test(t)));class P{constructor(e){this._ref=e}get _tag(){return this._ref._tag}get _removable(){return this._ref._removable}compose(e){return new P(I(this._ref,e._ref))}iso(e,r){return new P(I(this._ref,lt(e,r)))}lens(e,r){return new P(I(this._ref,ge(e,([o,n])=>r(n,o))))}indexed(){return new P(I(this._ref,dr))}prop(e){return new P(I(this._ref,Dt(e)))}path(...e){return e.length===1&&(e=e[0].split(".")),new P(e.reduce((r,o)=>I(r,Dt(o)),this._ref))}pick(e){return new P(I(this._ref,ur(e)))}nth(e){return new P(I(this._ref,Bt(e)))}filter(e){return new P(I(this._ref,gr(e)))}valueOr(e){return new P(I(this._ref,pr(e)))}partsOf(e){const r=typeof e=="function"?e(Vt):e;return new P(I(this._ref,vr(r._ref)))}reread(e){return new P(I(this._ref,yr(e)))}rewrite(e){return new P(I(this._ref,wr(e)))}optional(){return new P(I(this._ref,mr))}guard_(){return e=>this.guard(e)}guard(e){return new P(I(this._ref,hr(e)))}at(e){return new P(I(this._ref,wt(e)))}head(){return new P(I(this._ref,wt(0)))}index(e){return new P(I(this._ref,wt(e)))}find(e){return new P(I(this._ref,fr(e)))}elems(){return new P(I(this._ref,pt))}to(e){return new P(I(this._ref,sr(e)))}when(e){return new P(I(this._ref,yt(e)))}chars(){return new P(I(this._ref,xr))}words(){return new P(I(this._ref,Lr))}prependTo(){return new P(I(this._ref,br))}appendTo(){return new P(I(this._ref,Tr))}}const Vt=new P(ir);function _r(){return Vt}function jr(t){return e=>ar(t._ref,e)}function Ar(t){return e=>cr(t._ref,e)}function Er(t){return e=>Pt(t._ref,e)}function Cr(t){return e=>r=>Mt(t._ref,e,r)}function Fr(t){return e=>r=>lr(t._ref,e,r)}const Zt=(t,e,r)=>(e.has(r)?e:e.set(r,t())).get(r),Sr=new WeakMap,Ir=(t,e,r)=>{const o=Zt(()=>new WeakMap,Sr,e);return Zt(t,o,r)},Rr=t=>typeof t=="function";function Nr(t,e){return Ir(()=>{const r=e(_r());return ye(o=>{const n=o(t);return n instanceof Promise?n.then(c=>qt(r,c)):qt(r,n)},(o,n,c)=>{const s=Rr(c)?Cr(r)(c):Fr(r)(c),f=o(t);return n(t,f instanceof Promise?f.then(s):s(f))})},t,e)}const qt=(t,e)=>t._tag==="Traversal"?Er(t)(e):t._tag==="Prism"?Ar(t)(e):jr(t)(e);var et={},Ot;function kr(){if(Ot)return et;Ot=1,Object.defineProperty(et,"__esModule",{value:!0}),et.ViewportList=void 0;const t=pn(),e=vn(),r=typeof window>"u",o=!r&&(()=>{try{return"ontouchstart"in window||navigator.maxTouchPoints}catch{return!1}})(),n=!r&&(()=>{try{return window.CSS.supports("overflow-anchor: auto")}catch{return!1}})(),c=o&&!n,s={top:"top",bottom:"bottom",clientHeight:"clientHeight",scrollHeight:"scrollHeight",scrollTop:"scrollTop",overflowY:"overflowY",height:"height",minHeight:"minHeight",maxHeight:"maxHeight",marginTop:"marginTop"},f={top:"left",bottom:"right",scrollHeight:"scrollWidth",clientHeight:"clientWidth",scrollTop:"scrollLeft",overflowY:"overflowX",minHeight:"minWidth",height:"width",maxHeight:"maxWidth",marginTop:"marginLeft"},m=(a,u,F=1/0)=>Math.max(Math.min(u,F),a),v=(a,u,F)=>Math.ceil(Math.abs(a-u)/F),T=r?e.useEffect:e.useLayoutEffect,L=(a,u,F)=>{const D=[];for(let Y=a;Y<u;Y++)D.push(F(Y));return D},A=({fromElement:a,toElement:u,fromIndex:F,asc:D=!0,compare:Y})=>{let j=F,V=a;for(;V&&V!==u;){if(Y(V,j))return[V,j];D?(j++,V=V.nextSibling):(j--,V=V.previousSibling)}return[null,-1]},C=/auto|scroll/gi,_=(a,u)=>{if(!u||u===document.body||u===document.documentElement)return document.documentElement;const F=window.getComputedStyle(u);return C.test(F[a.overflowY])||C.test(F.overflow)?u:_(a,u.parentNode)},x=(a,u,F=0)=>({padding:0,margin:0,border:"none",visibility:"hidden",overflowAnchor:"none",[a.minHeight]:u,[a.height]:u,[a.maxHeight]:u,[a.marginTop]:F}),E=({items:a=[],count:u,children:F,viewportRef:D,itemSize:Y=0,itemMargin:j=-1,overscan:V=1,axis:K="y",initialIndex:O=-1,initialAlignToTop:ne=!0,initialOffset:p=0,initialDelay:g=-1,initialPrerender:Z=0,onViewportIndexesChange:B,overflowAnchor:J="auto",withCache:G=!0,scrollThreshold:oe=0,renderSpacer:ie=({ref:i,style:ee})=>(0,t.jsx)("div",{ref:i,style:ee}),indexesShift:X=0,getItemBoundingClientRect:w=i=>i.getBoundingClientRect()},ue)=>{const i=K==="y"?s:f,ee=typeof u=="number",H=(ee?u:a.length)-1,[[se,_e],Je]=(0,e.useState)(()=>[m(0,Y),m(-1,j)]),me=m(0,se+_e),Se=m(0,Math.ceil(V*me)),[te,Ie]=(0,e.useState)([O-Z,O+Z]),je=(0,e.useRef)(null),Ce=(0,e.useRef)(-1),he=(0,e.useRef)(null),ke=(0,e.useRef)(null),Ve=(0,e.useRef)(!1),Re=(0,e.useRef)(X),we=(0,e.useRef)([]),de=(0,e.useRef)(O>=0?{index:O,alignToTop:ne,offset:p,delay:g,prerender:Z}:null),be=(0,e.useRef)(null),ae=(0,e.useRef)(0),Ae=(0,e.useRef)([-1,-1]),Te=(0,e.useRef)(null),[N,Q]=(0,e.useMemo)(()=>{te[0]=m(0,te[0],H),te[1]=m(te[0],te[1],H);const l=X-Re.current;Re.current=X;const b=he.current;return b&&l&&(te[0]=m(0,te[0]+l,H),te[1]=m(te[0],te[1]+l,H),je.current=b.nextSibling,Ce.current=te[0],Ve.current=!0),te},[X,te,H]),Me=(0,e.useMemo)(()=>x(i,(G?we.current:[]).slice(0,N).reduce((l,b)=>l+(b-se),N*me),ae.current),[i,G,N,me,se]),Pe=(0,e.useMemo)(()=>x(i,(G?we.current:[]).slice(Q+1,H+1).reduce((l,b)=>l+(b-se),me*(H-Q))),[i,G,Q,H,me,se]),pe=(0,e.useMemo)(()=>{let l=null;return()=>{if(D)return D.current===document.body?document.documentElement:D.current;if(l&&l.isConnected)return l;const b=he.current;return b?(l=_(i,b.parentNode),l):null}},[i,D]),De=(0,e.useRef)(()=>{}),h=(0,e.useRef)(()=>({index:-1,offset:0}));T(()=>{De.current=()=>{const l=pe(),b=he.current,R=ke.current;if(!l||!b||!R)return;const S=b.nextSibling,z=R.previousSibling,fe=l.getBoundingClientRect(),W=b.getBoundingClientRect(),M=R.getBoundingClientRect(),ve={[i.top]:l===document.documentElement?0:fe[i.top],[i.bottom]:l===document.documentElement?document.documentElement[i.clientHeight]:fe[i.bottom]},re={[i.top]:ve[i.top]-Se,[i.bottom]:ve[i.bottom]+Se};if(ae.current<0&&W[i.top]-ae.current>=re[i.top]||ae.current>0&&W[i.top]>=re[i.top]||ae.current&&de.current){b.style[i.marginTop]="0px",l.style[i.overflowY]="hidden",l[i.scrollTop]+=-ae.current,l.style[i.overflowY]="",ae.current=0;return}if(se===0||_e===-1){let q=0;if(A({fromElement:S,toElement:R,fromIndex:N,compare:qe=>(q+=w(qe)[i.height],!1)}),!q)return;const ce=Q-N+1,Ne=se===0?Math.ceil(q/ce):se,Ze=_e===-1?Math.ceil((M[i.top]-W[i.bottom]-q)/ce):_e;Je([Ne,Ze]);return}if(be.current)return;if(de.current){const q=m(0,de.current.index,H);if(q<N||q>Q){Ie([q-de.current.prerender,q+de.current.prerender]);return}const[ce]=A({fromElement:S,toElement:R,fromIndex:N,compare:(_t,jt)=>jt===q});if(!ce)return;const{alignToTop:Ne,offset:Ze,delay:qe}=de.current;de.current=null;const $t=()=>{const _t=w(ce),jt=Ne?_t[i.top]-ve[i.top]+Ze:_t[i.bottom]-ve[i.top]-l[i.clientHeight]+Ze;l[i.scrollTop]+=jt,be.current=null},Jt=qe<0&&c?30:qe;if(Jt>0){be.current=setTimeout($t,Jt);return}$t();return}if(Te.current===null)Te.current=l.scrollTop;else if(Te.current!==l.scrollTop){const q=Math.abs(l.scrollTop-Te.current);if(Te.current=l.scrollTop,oe>0&&q>oe)return}const rt=S===R?R:S.nextSibling,Kt=z===b?b:z.previousSibling,Qe=Math.ceil((M[i.top]-W[i.bottom])/(Q+1-N)),nt=W[i.bottom]>re[i.bottom],ot=M[i.top]<re[i.top],mn=!nt&&!ot&&W[i.bottom]>re[i.top],hn=!nt&&!ot&&M[i.top]<re[i.bottom],fn=!nt&&!ot&&(Kt===b?W:w(Kt))[i.bottom]>re[i.bottom],gn=!nt&&!ot&&(rt===R?M:w(rt))[i.top]<re[i.top];let xe=N,Be=Q;if(nt&&(xe-=v(W[i.bottom],re[i.top],Qe),Be-=v(M[i.top],re[i.bottom],Qe)),ot&&(Be+=v(M[i.top],re[i.bottom],Qe),xe+=v(W[i.bottom],re[i.top],Qe)),mn&&(xe-=v(W[i.bottom],re[i.top],Qe)),hn&&(Be+=v(M[i.top],re[i.bottom],Qe)),fn){const[,q]=A({fromElement:z,toElement:b,fromIndex:Q,asc:!1,compare:ce=>w(ce)[i.bottom]<=re[i.bottom]});q!==-1&&(Be=q+1)}if(gn){const[,q]=A({fromElement:S,toElement:R,fromIndex:N,compare:ce=>w(ce)[i.top]>=re[i.top]});q!==-1&&(xe=q-1)}if(B){let[,q]=A({fromElement:S,toElement:R,fromIndex:N,compare:Ne=>w(Ne)[i.bottom]>ve[i.top]});q===-1&&(q=N);let[,ce]=A({fromElement:z,toElement:b,fromIndex:Q,asc:!1,compare:Ne=>w(Ne)[i.top]<ve[i.bottom]});ce===-1&&(ce=Q),(q!==Ae.current[0]||ce!==Ae.current[1])&&(Ae.current=[q,ce],B(Ae.current))}if(xe=m(0,xe,H),Be=m(xe,Be,H),!(xe===N&&Be===Q)){if(xe!==N)if(N>=xe)je.current=S,Ce.current=N;else{const[q,ce]=A({fromElement:S,toElement:R,fromIndex:N,compare:(Ne,Ze)=>{if(Ze===xe)return!0;const qe=w(Ne);return qe[i.height]!==se&&(we.current[Ze]=qe[i.height]),!1}});q?(je.current=q,Ce.current=ce):(je.current=z,Ce.current=Q)}Ie([xe,Be])}},h.current=()=>{const l=pe(),b=he.current,R=ke.current;let S=-1,z=0;if(!l||!b||!R)return{index:S,offset:z};const fe=b.nextSibling,W=l.getBoundingClientRect(),M={[i.top]:l===document.documentElement?0:W[i.top],[i.bottom]:l===document.documentElement?document.documentElement[i.clientHeight]:W[i.bottom]};return A({fromElement:fe,toElement:R,fromIndex:N,compare:(ve,re)=>{const rt=w(ve);return S=re,z=M[i.top]-rt[i.top],rt[i.bottom]>M[i.top]}}),{index:S,offset:z}}});let k;return je.current&&pe()&&he.current&&(k=w(je.current)[i.top]-(pe()===document.documentElement?0:pe().getBoundingClientRect()[i.top])),T(()=>{je.current=null;const l=Ce.current,b=Ve.current;Ce.current=-1,Ve.current=!1;const R=pe(),S=he.current,z=ke.current;if(l===-1||!R||!S||!z||k===void 0||n&&J!=="none"&&!b)return;let fe=null;if(l>=N&&l<=Q){const[M]=A({fromElement:S.nextSibling,toElement:z,fromIndex:N,compare:(ve,re)=>re===l});M&&(fe=w(M)[i.top])}else l<N?fe=S.getBoundingClientRect()[i.top]+(G?we.current:[]).slice(0,l).reduce((M,ve)=>M+(ve-se),l*me):l<=H&&(fe=z.getBoundingClientRect()[i.top]+(G?we.current:[]).slice(Q+1,l).reduce((M,ve)=>M+(ve-se),me*(l-1-Q)));if(fe===null)return;const W=fe-(R===document.documentElement?0:R.getBoundingClientRect()[i.top])-k;if(W){if(o){ae.current-=W,S.style[i.marginTop]=`${ae.current}px`;return}R[i.scrollTop]+=W}},[N]),T(()=>{let l;const b=()=>{l=requestAnimationFrame(b),De.current()};return b(),()=>{cancelAnimationFrame(l),be.current&&clearTimeout(be.current)}},[]),(0,e.useImperativeHandle)(ue,()=>({scrollToIndex:({index:l=-1,alignToTop:b=!0,offset:R=0,delay:S=-1,prerender:z=0})=>{de.current={index:l,alignToTop:b,offset:R,delay:S,prerender:z},De.current()},getScrollPosition:()=>h.current()}),[]),(0,t.jsxs)(e.Fragment,{children:[ie({ref:he,style:Me,type:"top"}),(!!u||!!a.length)&&L(N,Q+1,ee?F:l=>F(a[l],l,a)),ie({ref:ke,style:Pe,type:"bottom"})]})};return et.ViewportList=(0,e.forwardRef)(E),et}var Mr=kr();globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}},globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const Ye=globalThis.jotaiAtomCache.get("/home/runner/work/amll-ttml-tool/amll-ttml-tool/src/components/LyricLinesView/lyric-line-view-states.ts/draggingIdAtom",ye(""));Ye.debugLabel="draggingIdAtom",Ye.debugLabel="draggingIdAtom";const Pr="_lyricWord_ryj87_11",Dr="_edit_ryj87_12",Br="_sync_ryj87_19",Gr="_dropLeft_ryj87_26",zr="_dropRight_ryj87_29",Vr="_displayWord_ryj87_33",Zr="_startTime_ryj87_36",qr="_endTime_ryj87_37",Or="_lyricLine_ryj87_62",Wr="_dropTop_ryj87_67",Yr="_dropBottom_ryj87_70",Kr="_ignoreSync_ryj87_73",$r="_insertWordField_ryj87_82",Jr="_empty_ryj87_93",Qr="_lyricLineContainer_ryj87_97",Ur="_lyricWordsContainer_ryj87_107",Hr="_blank_ryj87_129",Xr="_selected_ryj87_137",en="_active_ryj87_158",y={lyricWord:Pr,edit:Dr,sync:Br,dropLeft:Gr,dropRight:zr,displayWord:Vr,startTime:Zr,endTime:qr,lyricLine:Or,dropTop:Wr,dropBottom:Yr,ignoreSync:Kr,insertWordField:$r,empty:Jr,lyricLineContainer:Qr,lyricWordsContainer:Ur,blank:Hr,selected:Xr,active:en};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}},globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const bt=globalThis.jotaiAtomCache.get("/home/runner/work/amll-ttml-tool/amll-ttml-tool/src/components/LyricLinesView/lyric-word-menu.tsx/selectedLinesSizeAtom",ye(t=>t(Ge).size));bt.debugLabel="selectedLinesSizeAtom",bt.debugLabel="selectedLinesSizeAtom";const Tt=globalThis.jotaiAtomCache.get("/home/runner/work/amll-ttml-tool/amll-ttml-tool/src/components/LyricLinesView/lyric-word-menu.tsx/selectedWordsSizeAtom",ye(t=>t(Ee).size));Tt.debugLabel="selectedWordsSizeAtom",Tt.debugLabel="selectedWordsSizeAtom";const tn=t=>{const e=Oe.c(27),{wordIndex:r,wordAtom:o,lineIndex:n}=t,c=Et(),s=U(Tt),f=U(bt),m=Le(Ue),v=Qt(yn),T=U(o),L=Qt(wn),A=s===0;let C;e[0]!==m||e[1]!==c?(C=()=>{m(j=>{const V=c.get(Ee);for(const K of j.lyricLines)K.words=K.words.filter(O=>!V.has(O.id))})},e[0]=m,e[1]=c,e[2]=C):C=e[2];let _;e[3]!==A||e[4]!==C?(_=d.jsx(Ct,{disabled:A,onClick:C,children:"\u5220\u9664\u6240\u9009\u5355\u8BCD"}),e[3]=A,e[4]=C,e[5]=_):_=e[5];const x=s!==1;let E;e[6]!==n||e[7]!==v||e[8]!==L||e[9]!==T.word||e[10]!==r?(E=()=>{L({wordIndex:r,lineIndex:n,word:T.word}),v(!0)},e[6]=n,e[7]=v,e[8]=L,e[9]=T.word,e[10]=r,e[11]=E):E=e[11];let a;e[12]!==x||e[13]!==E?(a=d.jsx(Ct,{disabled:x,onClick:E,children:"\u62C6\u5206\u6B64\u5355\u8BCD/\u5728\u6B64\u5904\u66FF\u6362\u5355\u8BCD"}),e[12]=x,e[13]=E,e[14]=a):a=e[14];const u=!(s>1&&f===1);let F;e[15]!==m||e[16]!==n||e[17]!==c||e[18]!==r?(F=()=>{m(j=>{const V=c.get(Ee),K=j.lyricLines[n];if(K){let O=-1,ne="";for(const g of K.words)V.has(g.id)&&(ne=ne+g.word,O===-1&&(O=K.words.indexOf(g)));const p=at();p.word=ne,p.startTime=K.words[r].startTime,j.lyricLines[n].words=K.words.filter(g=>!V.has(g.id)),O!==-1&&j.lyricLines[n].words.splice(O,0,p)}})},e[15]=m,e[16]=n,e[17]=c,e[18]=r,e[19]=F):F=e[19];let D;e[20]!==u||e[21]!==F?(D=d.jsx(Ct,{disabled:u,onClick:F,children:"\u5408\u5E76\u5355\u8BCD"}),e[20]=u,e[21]=F,e[22]=D):D=e[22];let Y;return e[23]!==_||e[24]!==a||e[25]!==D?(Y=d.jsxs(bn,{children:[_,a,D]}),e[23]=_,e[24]=a,e[25]=D,e[26]=Y):Y=e[26],Y};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}},globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const Ke=globalThis.jotaiAtomCache.get("/home/runner/work/amll-ttml-tool/amll-ttml-tool/src/components/LyricLinesView/lyric-word-view.tsx/isDraggingAtom",ye(!1));Ke.debugLabel="isDraggingAtom",Ke.debugLabel="isDraggingAtom";const tt=globalThis.jotaiAtomCache.get("/home/runner/work/amll-ttml-tool/amll-ttml-tool/src/components/LyricLinesView/lyric-word-view.tsx/draggingIdAtom",ye(""));tt.debugLabel="draggingIdAtom",tt.debugLabel="draggingIdAtom";const xt=t=>{let e;return e=t.length===0||t.length>0&&t.trim().length===0,e},rn=t=>{const e=Oe.c(27),{wordAtom:r,wordIndex:o,line:n,lineIndex:c}=t,s=U(r),f=Et(),m=Le(Ue),v=Le(Ge);let T,L;e[0]!==r?(L=ye(p=>p(Ee).has(p(r).id)),e[0]=r,e[1]=L):L=e[1],T=L;const A=U(T),C=Le(Ee),[_,x]=$.useState(!1),E=U(ct),a=xt(s.word),u=Wt(s.word,a);let F;const D=A&&y.selected,Y=a&&y.blank;let j;e[2]!==D||e[3]!==Y?(j=ze(y.lyricWord,y.edit,D,Y),e[2]=D,e[3]=Y,e[4]=j):j=e[4],F=j;const V=F;let K;e[5]!==m||e[6]!==c||e[7]!==s.word||e[8]!==o?(K=p=>{x(!1);const g=p.currentTarget.value;g!==s.word&&m(Z=>{Z.lyricLines[c].words[o].word=g})},e[5]=m,e[6]=c,e[7]=s.word,e[8]=o,e[9]=K):K=e[9];const O=K;let ne;return e[10]!==V||e[11]!==u||e[12]!==m||e[13]!==_||e[14]!==A||e[15]!==n||e[16]!==c||e[17]!==O||e[18]!==v||e[19]!==C||e[20]!==f||e[21]!==E||e[22]!==s.id||e[23]!==s.word||e[24]!==r||e[25]!==o?(ne=_?d.jsx(Ft,{autoFocus:!0,defaultValue:s.word,onBlur:O,onKeyDown:p=>{p.key==="Enter"&&O(p)}}):d.jsxs(Tn,{onOpenChange:p=>{p&&(A||(C(g=>{g.clear(),g.add(s.id)}),v(g=>{g.clear(),g.add(n.id)})))},children:[d.jsx(xn,{children:d.jsx("span",{draggable:E===le.Edit,onDragStart:p=>{p.dataTransfer.dropEffect="move",f.set(Ke,!0),f.set(tt,s.id),p.stopPropagation()},onDragEnd:()=>{f.set(Ke,!1)},onDragOver:p=>{if(!f.get(Ke)||f.get(tt)===s.id||A)return;p.preventDefault(),p.dataTransfer.dropEffect="move";const g=p.currentTarget.getBoundingClientRect();p.clientX-g.left<g.width/2?(p.currentTarget.classList.add(y.dropLeft),p.currentTarget.classList.remove(y.dropRight)):(p.currentTarget.classList.remove(y.dropLeft),p.currentTarget.classList.add(y.dropRight))},onDrop:p=>{if(p.currentTarget.classList.remove(y.dropLeft),p.currentTarget.classList.remove(y.dropRight),!f.get(Ke))return;const g=p.currentTarget.getBoundingClientRect(),Z=p.clientX-g.left,B=new Set(f.get(Ee)),J=f.get(tt);A||(B.clear(),B.add(J)),Z<g.width/2?m(G=>{const oe=[];for(const w of G.lyricLines){const ue=w.words.filter(i=>B.has(i.id));oe.push(...ue),w.words=w.words.filter(i=>!B.has(i.id))}const ie=G.lyricLines.find(w=>w.id===n.id);if(!ie)return;const X=ie.words.findIndex(w=>w.id===s.id);X<0||ie.words.splice(X,0,...oe)}):m(G=>{const oe=[];for(const w of G.lyricLines){const ue=w.words.filter(i=>B.has(i.id));oe.push(...ue),w.words=w.words.filter(i=>!B.has(i.id))}const ie=G.lyricLines.find(w=>w.id===n.id);if(!ie)return;const X=ie.words.findIndex(w=>w.id===s.id);X<0||ie.words.splice(X+1,0,...oe)})},onDragLeave:sn,className:V,onDoubleClick:()=>{x(!0)},onClick:p=>{p.stopPropagation(),p.preventDefault(),p.ctrlKey||p.metaKey?C(g=>{g.has(s.id)?g.delete(s.id):g.add(s.id)}):p.shiftKey?C(g=>{if(g.size>0){let Z;Z=Number.NaN;let B;B=Number.NaN,n.words.forEach((J,G)=>{g.has(J.id)&&(Number.isNaN(Z)&&(Z=G),Number.isNaN(B)&&(B=G),Z=Math.min(Z,G,o),B=Math.max(B,G,o))});for(let J=Z;J<=B;J++)g.add(n.words[J].id)}else g.add(s.id)}):(v(g=>{(!g.has(n.id)||g.size!==1)&&(g.clear(),g.add(n.id))}),C(g=>{(!g.has(s.id)||g.size!==1)&&(g.clear(),g.add(s.id))}))},children:u})}),d.jsx(tn,{wordAtom:r,wordIndex:o,lineIndex:c})]}),e[10]=V,e[11]=u,e[12]=m,e[13]=_,e[14]=A,e[15]=n,e[16]=c,e[17]=O,e[18]=v,e[19]=C,e[20]=f,e[21]=E,e[22]=s.id,e[23]=s.word,e[24]=r,e[25]=o,e[26]=ne):ne=e[26],ne},nn=t=>{const e=Oe.c(41),{wordAtom:r,line:o}=t,n=U(r);let c,s;e[0]!==r?(s=ye(i=>i(Ee).has(i(r).id)),e[0]=r,e[1]=s):s=e[1],c=s;const f=c;let m,v;e[2]!==r?(v=ye(i=>{const ee=i(Ln),H=i(r);return ee>=H.startTime&&ee<H.endTime}),e[2]=r,e[3]=v):v=e[3],m=v;const T=U(m),L=U(f),A=Le(Ee),C=Le(Ge),_=U(Ut),x=xt(n.word),E=Wt(n.word,x),a=$.useRef(null),u=$.useRef(null);let F;e[4]!==_?(F=()=>{if(!_)return;const i=a.current?.animate([{backgroundColor:"var(--green-a8)"},{backgroundColor:"var(--green-a4)"}],{duration:500});return()=>{i?.cancel()}},e[4]=_,e[5]=F):F=e[5];let D;e[6]!==_||e[7]!==n.startTime?(D=[n.startTime,_],e[6]=_,e[7]=n.startTime,e[8]=D):D=e[8],$.useEffect(F,D);let Y;e[9]!==_?(Y=()=>{if(!_)return;const i=u.current?.animate([{backgroundColor:"var(--red-a8)"},{backgroundColor:"var(--red-a4)"}],{duration:500});return()=>{i?.cancel()}},e[9]=_,e[10]=Y):Y=e[10];let j;e[11]!==_||e[12]!==n.endTime?(j=[n.endTime,_],e[11]=_,e[12]=n.endTime,e[13]=j):j=e[13],$.useEffect(Y,j);let V;const K=L&&y.selected,O=x&&y.blank,ne=T&&y.active;let p;e[14]!==K||e[15]!==O||e[16]!==ne?(p=ze(y.lyricWord,y.sync,K,O,ne),e[14]=K,e[15]=O,e[16]=ne,e[17]=p):p=e[17],V=p;const g=V;let Z;e[18]!==o.id||e[19]!==C||e[20]!==A||e[21]!==n.id?(Z=i=>{i.stopPropagation(),i.preventDefault(),C(ee=>{ee.clear(),ee.add(o.id)}),A(ee=>{ee.clear(),ee.add(n.id)})},e[18]=o.id,e[19]=C,e[20]=A,e[21]=n.id,e[22]=Z):Z=e[22];let B;e[23]===Symbol.for("react.memo_cache_sentinel")?(B=ze(y.startTime),e[23]=B):B=e[23];let J;e[24]!==n.startTime?(J=dt(n.startTime),e[24]=n.startTime,e[25]=J):J=e[25];let G;e[26]!==J?(G=d.jsx("div",{className:B,ref:a,children:J}),e[26]=J,e[27]=G):G=e[27];let oe;e[28]!==E?(oe=d.jsx("div",{className:y.displayWord,children:E}),e[28]=E,e[29]=oe):oe=e[29];let ie;e[30]===Symbol.for("react.memo_cache_sentinel")?(ie=ze(y.endTime),e[30]=ie):ie=e[30];let X;e[31]!==n.endTime?(X=dt(n.endTime),e[31]=n.endTime,e[32]=X):X=e[32];let w;e[33]!==X?(w=d.jsx("div",{className:ie,ref:u,children:X}),e[33]=X,e[34]=w):w=e[34];let ue;return e[35]!==g||e[36]!==Z||e[37]!==G||e[38]!==oe||e[39]!==w?(ue=d.jsxs("div",{className:g,onClick:Z,children:[G,oe,w]}),e[35]=g,e[36]=Z,e[37]=G,e[38]=oe,e[39]=w,e[40]=ue):ue=e[40],ue},Wt=(t,e)=>{let r;e:{if(t===""){r="\u7A7A\u767D";break e}if(e){r=`\u7A7A\u683C x${t.length}`;break e}r=t}return r},on=$.memo(t=>{const e=Oe.c(16),{wordAtom:r,wordIndex:o,line:n,lineIndex:c}=t,s=U(r),f=U(ct),m=xt(s.word);let v;e[0]!==n||e[1]!==c||e[2]!==f||e[3]!==r||e[4]!==o?(v=f===le.Edit&&d.jsx(rn,{wordAtom:r,line:n,lineIndex:c,wordIndex:o}),e[0]=n,e[1]=c,e[2]=f,e[3]=r,e[4]=o,e[5]=v):v=e[5];let T;e[6]!==m||e[7]!==n||e[8]!==c||e[9]!==f||e[10]!==r||e[11]!==o?(T=f===le.Sync&&!m&&d.jsx(nn,{wordAtom:r,line:n,lineIndex:c,wordIndex:o}),e[6]=m,e[7]=n,e[8]=c,e[9]=f,e[10]=r,e[11]=o,e[12]=T):T=e[12];let L;return e[13]!==v||e[14]!==T?(L=d.jsxs("div",{children:[v,T]}),e[13]=v,e[14]=T,e[15]=L):L=e[15],L});function sn(t){t.currentTarget.classList.remove(y.dropLeft),t.currentTarget.classList.remove(y.dropRight)}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}},globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const $e=globalThis.jotaiAtomCache.get("/home/runner/work/amll-ttml-tool/amll-ttml-tool/src/components/LyricLinesView/lyric-line-view.tsx/isDraggingAtom",ye(!1));$e.debugLabel="isDraggingAtom",$e.debugLabel="isDraggingAtom";const ln=t=>{const e=Oe.c(5),{lineAtom:r,wordsContainerRef:o}=t,n=U(r),c=U(Ee);let s,f;return e[0]!==n.words||e[1]!==c||e[2]!==o.current?(s=()=>{const m=o.current;if(!m)return;let v=Number.NaN,T=0;for(const A of n.words){if(c.has(A.id)){v=T;break}T++}if(Number.isNaN(v))return;const L=m.children[v];L&&m.scrollTo({left:L.offsetLeft-m.clientWidth/2,behavior:"instant"})},f=[n.words,c,o.current],e[0]=n.words,e[1]=c,e[2]=o.current,e[3]=s,e[4]=f):(s=e[3],f=e[4]),$.useEffect(s,f),null},Yt=$.memo(t=>{const e=Oe.c(15),{lineAtom:r,lineIndex:o,type:n}=t,c=Le(Ue),s=U(r),[f,m]=$.useState(!1);let v;e[0]!==c||e[1]!==s||e[2]!==o||e[3]!==n?(v=E=>{m(!1);const a=E.currentTarget.value;a!==s[n]&&c(u=>{u.lyricLines[o][n]=a})},e[0]=c,e[1]=s,e[2]=o,e[3]=n,e[4]=v):v=e[4];const T=v;let L;L=n==="translatedLyric"?"\u7FFB\u8BD1\uFF1A":"\u97F3\u8BD1\uFF1A";const A=L;let C;e[5]!==A?(C=d.jsx(it,{size:"2",children:A}),e[5]=A,e[6]=C):C=e[6];let _;e[7]!==f||e[8]!==s||e[9]!==T||e[10]!==n?(_=f?d.jsx(Ft,{autoFocus:!0,size:"1",defaultValue:s[n],onBlur:T,onKeyDown:E=>{E.key==="Enter"&&T(E)}}):d.jsx(St,{size:"2",color:"gray",variant:"ghost",onClick:E=>{E.stopPropagation(),m(!0)},children:s[n]||d.jsx(it,{color:"gray",children:"\u65E0"})}),e[7]=f,e[8]=s,e[9]=T,e[10]=n,e[11]=_):_=e[11];let x;return e[12]!==C||e[13]!==_?(x=d.jsxs(He,{align:"baseline",children:[C,_]}),e[12]=C,e[13]=_,e[14]=x):x=e[14],x}),an=$.memo(t=>{const e=Oe.c(130),{lineAtom:r,lineIndex:o}=t,n=U(r),c=Le(Ge);let s,f;e[0]!==n.id?(f=h=>h(Ge).has(n.id),e[0]=n.id,e[1]=f):f=e[1];let m;e[2]!==n.id||e[3]!==f?(m=ye(f),e[2]=n.id,e[3]=f,e[4]=m):m=e[4],s=m;const v=s;let T,L;e[5]!==r?(L=Ht(ye(h=>h(r).words)),e[5]=r,e[6]=L):L=e[6],T=L;const A=U(T),C=U(v),_=Le(Ee),x=Le(Ue),E=U(Ut),a=U(ct),u=Et(),F=$.useRef(null),D=$.useRef(null),Y=$.useRef(null),[j,V]=$.useState(!1);let K;e[7]!==E?(K=()=>{if(!E)return;const h=D.current?.animate([{backgroundColor:"var(--green-a8)"},{backgroundColor:"var(--green-a4)"}],{duration:500});return()=>{h?.cancel()}},e[7]=E,e[8]=K):K=e[8];let O;e[9]!==n.startTime||e[10]!==E?(O=[n.startTime,E],e[9]=n.startTime,e[10]=E,e[11]=O):O=e[11],$.useEffect(K,O);let ne,p;e[12]!==a?(ne=()=>{a!==le.Edit&&V(!1)},p=[a],e[12]=a,e[13]=ne,e[14]=p):(ne=e[13],p=e[14]),$.useLayoutEffect(ne,p);let g;e[15]!==E?(g=()=>{if(!E)return;const h=Y.current?.animate([{backgroundColor:"var(--red-a8)"},{backgroundColor:"var(--red-a4)"}],{duration:500});return()=>{h?.cancel()}},e[15]=E,e[16]=g):g=e[16];let Z;e[17]!==n.endTime||e[18]!==E?(Z=[n.endTime,E],e[17]=n.endTime,e[18]=E,e[19]=Z):Z=e[19],$.useEffect(g,Z);let B;e[20]!==r?(B=d.jsx(ln,{lineAtom:r,wordsContainerRef:F}),e[20]=r,e[21]=B):B=e[21];let J;e[22]!==x||e[23]!==j||e[24]!==o?(J=j&&d.jsx(St,{mx:"2",my:"1",variant:"soft",size:"1",style:{width:"calc(100% - var(--space-4))"},onClick:()=>{x(h=>{h.lyricLines.splice(o,0,Xt())}),V(!1)},children:"\u5728\u6B64\u63D2\u5165\u65B0\u884C"}),e[22]=x,e[23]=j,e[24]=o,e[25]=J):J=e[25];const G=C&&y.selected,oe=a===le.Sync&&y.sync,ie=a===le.Edit&&y.edit,X=n.ignoreSync&&y.ignoreSync;let w;e[26]!==G||e[27]!==oe||e[28]!==ie||e[29]!==X?(w=ze(y.lyricLine,G,oe,ie,X),e[26]=G,e[27]=oe,e[28]=ie,e[29]=X,e[30]=w):w=e[30];const ue=a===le.Edit;let i;e[31]!==n.id||e[32]!==u?(i=h=>{h.dataTransfer.dropEffect="move",u.set($e,!0),u.set(Ye,n.id)},e[31]=n.id,e[32]=u,e[33]=i):i=e[33];let ee;e[34]!==u?(ee=()=>{u.set($e,!1)},e[34]=u,e[35]=ee):ee=e[35];let H;e[36]!==n.id||e[37]!==C||e[38]!==u?(H=h=>{if(!u.get($e)||u.get(Ye)===n.id||C)return;h.preventDefault(),h.dataTransfer.dropEffect="move";const k=h.currentTarget.getBoundingClientRect();h.clientY-k.top<k.height/2?(h.currentTarget.classList.add(y.dropTop),h.currentTarget.classList.remove(y.dropBottom)):(h.currentTarget.classList.remove(y.dropTop),h.currentTarget.classList.add(y.dropBottom))},e[36]=n.id,e[37]=C,e[38]=u,e[39]=H):H=e[39];let se;e[40]!==x||e[41]!==n.id||e[42]!==u?(se=h=>{if(h.currentTarget.classList.remove(y.dropTop),h.currentTarget.classList.remove(y.dropBottom),!u.get($e))return;const k=h.currentTarget.getBoundingClientRect(),l=h.clientY-k.top,b=u.get(Ge),R=b.has(u.get(Ye))?b:new Set([u.get(Ye)]);l<k.height/2?x(S=>{const z=S.lyricLines.filter(M=>!R.has(M.id)),fe=S.lyricLines.filter(M=>R.has(M.id)),W=z.findIndex(M=>M.id===n.id);W<0||(S.lyricLines=[...z.slice(0,W),...fe,...z.slice(W)])}):x(S=>{const z=S.lyricLines.filter(M=>!R.has(M.id)),fe=S.lyricLines.filter(M=>R.has(M.id)),W=z.findIndex(M=>M.id===n.id);W<0||(S.lyricLines=[...z.slice(0,W+1),...fe,...z.slice(W+2)])})},e[40]=x,e[41]=n.id,e[42]=u,e[43]=se):se=e[43];let _e;e[44]!==n.id||e[45]!==o||e[46]!==c||e[47]!==_||e[48]!==u?(_e=h=>{h.stopPropagation(),h.preventDefault(),h.ctrlKey?c(k=>{k.has(n.id)?k.delete(n.id):k.add(n.id)}):h.shiftKey?c(k=>{if(k.size>0){let l;l=Number.NaN;let b;b=Number.NaN;const R=u.get(Ue).lyricLines;R.forEach((S,z)=>{k.has(S.id)&&(Number.isNaN(l)&&(l=z),Number.isNaN(b)&&(b=z),l=Math.min(l,z,o),b=Math.max(b,z,o))});for(let S=l;S<=b;S++)k.add(R[S].id)}else k.add(n.id)}):(c(k=>{(!k.has(n.id)||k.size!==1)&&(k.clear(),k.add(n.id))}),_(dn))},e[44]=n.id,e[45]=o,e[46]=c,e[47]=_,e[48]=u,e[49]=_e):_e=e[49];let Je;e[50]===Symbol.for("react.memo_cache_sentinel")?(Je={minWidth:"2em"},e[50]=Je):Je=e[50];let me;e[51]!==o?(me=d.jsx(it,{style:Je,align:"center",color:"gray",children:o}),e[51]=o,e[52]=me):me=e[52];let Se;e[53]!==n.isBG?(Se=n.isBG&&d.jsx(tr,{color:"#4466FF"}),e[53]=n.isBG,e[54]=Se):Se=e[54];let te;e[55]!==n.isDuet?(te=n.isDuet&&d.jsx(er,{color:"#44AA33"}),e[55]=n.isDuet,e[56]=te):te=e[56];let Ie;e[57]!==me||e[58]!==Se||e[59]!==te?(Ie=d.jsxs(He,{direction:"column",align:"center",justify:"center",ml:"3",children:[me,Se,te]}),e[57]=me,e[58]=Se,e[59]=te,e[60]=Ie):Ie=e[60];const je=a===le.Edit&&y.edit,Ce=a===le.Sync&&y.sync;let he;e[61]!==je||e[62]!==Ce?(he=ze(y.lyricLineContainer,je,Ce),e[61]=je,e[62]=Ce,e[63]=he):he=e[63];const ke=a===le.Edit&&y.edit,Ve=a===le.Sync&&y.sync;let Re;e[64]!==ke||e[65]!==Ve?(Re=ze(y.lyricWordsContainer,ke,Ve),e[64]=ke,e[65]=Ve,e[66]=Re):Re=e[66];let we;if(e[67]!==x||e[68]!==j||e[69]!==n||e[70]!==o||e[71]!==A){let h;e[73]!==x||e[74]!==j||e[75]!==n||e[76]!==o?(h=(k,l)=>d.jsxs($.Fragment,{children:[j&&d.jsx(It,{size:"1",variant:"soft",onClick:b=>{b.preventDefault(),b.stopPropagation(),x(R=>{R.lyricLines[o].words.splice(l,0,at())})},children:d.jsx(ut,{})}),d.jsx(on,{wordAtom:k,wordIndex:l,line:n,lineIndex:o})]},`word-${k}-${l}`),e[73]=x,e[74]=j,e[75]=n,e[76]=o,e[77]=h):h=e[77],we=A.map(h),e[67]=x,e[68]=j,e[69]=n,e[70]=o,e[71]=A,e[72]=we}else we=e[72];let de;e[78]!==x||e[79]!==j||e[80]!==o?(de=j&&d.jsx(It,{size:"1",variant:"soft",onClick:h=>{h.preventDefault(),h.stopPropagation(),x(k=>{k.lyricLines[o].words.push(at())})},children:d.jsx(ut,{})}),e[78]=x,e[79]=j,e[80]=o,e[81]=de):de=e[81];let be;e[82]!==x||e[83]!==o||e[84]!==a||e[85]!==A.length?(be=a===le.Edit&&d.jsx(Ft,{placeholder:"\u63D2\u5165\u5355\u8BCD\u2026",className:ze(y.insertWordField,A.length===0&&y.empty),style:{alignSelf:"center"},onKeyDown:h=>{h.key==="Enter"&&(h.preventDefault(),h.stopPropagation(),x(k=>{k.lyricLines[o].words.push({...at(),word:h.currentTarget.value})}),h.currentTarget.value="")}}),e[82]=x,e[83]=o,e[84]=a,e[85]=A.length,e[86]=be):be=e[86];let ae;e[87]!==Re||e[88]!==we||e[89]!==de||e[90]!==be?(ae=d.jsxs("div",{className:Re,ref:F,children:[we,de,be]}),e[87]=Re,e[88]=we,e[89]=de,e[90]=be,e[91]=ae):ae=e[91];let Ae;e[92]!==r||e[93]!==o||e[94]!==a?(Ae=a===le.Edit&&d.jsxs(d.Fragment,{children:[d.jsx(Yt,{lineAtom:r,lineIndex:o,type:"translatedLyric"}),d.jsx(Yt,{lineAtom:r,lineIndex:o,type:"romanLyric"})]}),e[92]=r,e[93]=o,e[94]=a,e[95]=Ae):Ae=e[95];let Te;e[96]!==he||e[97]!==ae||e[98]!==Ae?(Te=d.jsxs("div",{className:he,ref:F,children:[ae,Ae]}),e[96]=he,e[97]=ae,e[98]=Ae,e[99]=Te):Te=e[99];let N;e[100]!==j||e[101]!==a?(N=a===le.Edit&&d.jsx(He,{p:"3",children:d.jsx(It,{size:"1",variant:j?"solid":"soft",onClick:h=>{h.preventDefault(),h.stopPropagation(),V(un)},children:d.jsx(ut,{})})}),e[100]=j,e[101]=a,e[102]=N):N=e[102];let Q;e[103]!==n.endTime||e[104]!==n.startTime||e[105]!==a?(Q=a===le.Sync&&d.jsxs(He,{pr:"3",gap:"1",direction:"column",align:"stretch",children:[d.jsx("div",{className:y.startTime,ref:D,children:dt(n.startTime)}),d.jsx("div",{className:y.endTime,ref:Y,children:dt(n.endTime)})]}),e[103]=n.endTime,e[104]=n.startTime,e[105]=a,e[106]=Q):Q=e[106];let Me;e[107]!==Ie||e[108]!==Te||e[109]!==N||e[110]!==Q?(Me=d.jsxs("div",{children:[Ie,Te,N,Q]}),e[107]=Ie,e[108]=Te,e[109]=N,e[110]=Q,e[111]=Me):Me=e[111];let Pe;e[112]!==w||e[113]!==ue||e[114]!==i||e[115]!==ee||e[116]!==H||e[117]!==se||e[118]!==_e||e[119]!==Me?(Pe=d.jsx(He,{mx:"2",my:"1",direction:"row",className:w,align:"center",gapX:"4",draggable:ue,onDragStart:i,onDragEnd:ee,onDragOver:H,onDrop:se,onDragLeave:cn,onClick:_e,asChild:!0,children:Me}),e[112]=w,e[113]=ue,e[114]=i,e[115]=ee,e[116]=H,e[117]=se,e[118]=_e,e[119]=Me,e[120]=Pe):Pe=e[120];let pe;e[121]!==x||e[122]!==j||e[123]!==o?(pe=j&&d.jsx(St,{mx:"2",my:"1",variant:"soft",size:"1",style:{width:"calc(100% - var(--space-4))"},onClick:()=>{x(h=>{h.lyricLines.splice(o+1,0,Xt())}),V(!1)},children:"\u5728\u6B64\u63D2\u5165\u65B0\u884C"}),e[121]=x,e[122]=j,e[123]=o,e[124]=pe):pe=e[124];let De;return e[125]!==B||e[126]!==J||e[127]!==Pe||e[128]!==pe?(De=d.jsxs(d.Fragment,{children:[B,J,Pe,pe]}),e[125]=B,e[126]=J,e[127]=Pe,e[128]=pe,e[129]=De):De=e[129],De});function cn(t){t.currentTarget.classList.remove(y.dropTop),t.currentTarget.classList.remove(y.dropBottom)}function dn(t){t.size!==0&&t.clear()}function un(t){return!t}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}},globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(t,e){return this.cache.has(t)?this.cache.get(t):(this.cache.set(t,e),e)}};const Lt=globalThis.jotaiAtomCache.get("/home/runner/work/amll-ttml-tool/amll-ttml-tool/src/components/LyricLinesView/index.tsx/lyricLinesOnlyAtom",Ht(Nr(Ue,t=>t.prop("lyricLines"))));Lt.debugLabel="lyricLinesOnlyAtom",Lt.debugLabel="lyricLinesOnlyAtom",Rt=$.forwardRef((t,e)=>{const r=U(Lt),o=Le(Ge),n=Le(Ee),c=$.useRef(null),s=$.useRef(null),f=U(ct),m=$.useMemo(()=>ye(T=>{if(f!==le.Sync)return;const L=s.current;if(!L||!L.parentElement)return;const A=T(Ge);let C=Number.NaN,_=0;for(const x of r){const E=T(x);if(A.has(E.id)){C=_;break}_++}if(!Number.isNaN(C))return C}),[r,f]),v=U(m);return $.useEffect(()=>{if(v===void 0)return;const T=s.current;if(!T)return;const L=T.parentElement;L&&c.current?.scrollToIndex({index:v,offset:L.clientHeight/-2+50})},[v]),$.useImperativeHandle(e,()=>s.current,[]),r.length===0?d.jsxs(He,{flexGrow:"1",gap:"2",align:"center",justify:"center",direction:"column",height:"100%",ref:e,children:[d.jsx(it,{color:"gray",children:"\u6CA1\u6709\u6B4C\u8BCD\u884C"}),d.jsx(it,{color:"gray",children:"\u5728\u9876\u90E8\u9762\u677F\u4E2D\u6DFB\u52A0\u65B0\u6B4C\u8BCD\u884C\u6216\u4ECE\u83DC\u5355\u680F\u6253\u5F00 / \u5BFC\u5165\u5DF2\u6709\u6B4C\u8BCD"})]}):d.jsx(_n,{flexGrow:"1",style:{padding:f===le.Sync?"20vh 0":void 0,maxHeight:"100%",overflowY:"auto"},onClick:T=>{o(L=>L.clear()),n(L=>L.clear()),T.stopPropagation()},ref:s,children:d.jsx(Mr.ViewportList,{overscan:10,items:r,ref:c,viewportRef:s,children:(T,L)=>d.jsx(an,{lineAtom:T,lineIndex:L},`${T}`)})})})});export{Rt as LyricLinesView,An as __tla,Rt as default};
