const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-DYnBshQD.js","./index-B3K8Wc-q.js","./index-DkyVaLZ5.css"])))=>i.map(i=>d[i]);
import{c as ot,m as _,O as Fa,P as $a,Q as Et,U as Na,V as za,W as Ft,X as $t,Y as Va,Z as jt,_ as Za,f as ct,g as Nt,$ as Ba,e as pe,k as t,A as V,a0 as ve,a as pt,a1 as W,a2 as zt,a3 as qa,u as Vt,l as qe,a4 as Ee,C as Y,z as Ae,a5 as ft,a6 as yt,a7 as Ce,a8 as wt,p as fe,a9 as _t,aa as Zt,ab as Fe,ac as $e,n as vt,ad as Bt,E as Ga,ae as Wa,af as Ka,D as qt,ag as Ha,ah as Ya,ai as Ua,aj as Ja,ak as Gt,al as Qa,am as Xa,an as Ne,ao as Wt,F as At,ap as el,aq as tl,ar as al,as as ll,at as sl,au as nl,av as ol,aw as cl,ax as rl,ay as il,az as hl,aA as ml,aB as dl,aC as ul,aD as gl,aE as xl,aF as bl,aG as jl,aH as pl,aI as fl,aJ as Kt,aK as yl,aL as wl,aM as _l,aN as vl,aO as Al,aP as Cl,aQ as Tl,aR as Sl,aS as Ll,aT as Ml,aU as Ct,aV as Tt,aW as kl,aX as rt,aY as it,aZ as ht,a_ as Il,a$ as Dl,b0 as Pl,b1 as Rl,b2 as Ol,b3 as Ht,b4 as El,b5 as Fl,b6 as $l,b7 as Nl,N as Le,b8 as zl,b9 as Vl,i as Zl,j as Bl,__tla as ql}from"./index-B3K8Wc-q.js";let St,Gl=Promise.all([(()=>{try{return ql}catch{}})()]).then(async()=>{const Yt=ot("Add16Regular","16",["M8 2c.28 0 .5.22.5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5c0-.28.22-.5.5-.5Z"]),Ut=ot("Delete16Regular","16",["M7 3h2a1 1 0 0 0-2 0ZM6 3a2 2 0 1 1 4 0h4a.5.5 0 0 1 0 1h-.56l-1.2 8.84A2.5 2.5 0 0 1 9.74 15h-3.5a2.5 2.5 0 0 1-2.48-2.16L2.57 4H2a.5.5 0 0 1 0-1h4Zm1 3.5a.5.5 0 0 0-1 0v5a.5.5 0 0 0 1 0v-5ZM9.5 6c.28 0 .5.22.5.5v5a.5.5 0 0 1-1 0v-5c0-.28.22-.5.5-.5Zm-4.74 6.7c.1.75.74 1.3 1.49 1.3h3.5a1.5 1.5 0 0 0 1.5-1.3L12.42 4H3.57l1.19 8.7Z"]),Lt=ot("ErrorCircle16Regular","16",["M8 2a6 6 0 1 1 0 12A6 6 0 0 1 8 2Zm0 1a5 5 0 1 0 0 10A5 5 0 0 0 8 3Zm0 7a.75.75 0 1 1 0 1.5.75.75 0 0 1 0-1.5Zm0-5.5a.5.5 0 0 1 .5.41V8.5a.5.5 0 0 1-1 .09V5c0-.28.22-.5.5-.5Z"]),mt=ot("Info16Regular","16",["M8.5 7.5a.5.5 0 1 0-1 0v3a.5.5 0 0 0 1 0v-3Zm.25-2a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM8 1a7 7 0 1 0 0 14A7 7 0 0 0 8 1ZM2 8a6 6 0 1 1 12 0A6 6 0 0 1 2 8Z"]),Jt=(e,a)=>{const s=_.useRef();return _.useEffect(()=>{s.current=e},[e,a]),s.current},Mt=(e,a,s,c)=>e.getFixedT(a,s,c),Qt=(e,a,s,c)=>_.useCallback(Mt(e,a,s,c),[e,a,s,c]),Xt=(e,a={})=>{const{i18n:s}=a,{i18n:c,defaultNS:r}=_.useContext(Fa)||{},l=s||c||Va();if(l&&!l.reportNamespaces&&(l.reportNamespaces=new $a),!l){Et(l,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const u=(j,i)=>jt(i)?i:Za(i)&&jt(i.defaultValue)?i.defaultValue:Array.isArray(j)?j[j.length-1]:j,g=[u,{},!1];return g.t=u,g.i18n={},g.ready=!1,g}l.options.react?.wait&&Et(l,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const h={...Na(),...l.options.react,...a},{useSuspense:n,keyPrefix:m}=h;let o=r||l.options?.defaultNS;o=jt(o)?[o]:o||["translation"],l.reportNamespaces.addUsedNamespaces?.(o);const p=(l.isInitialized||l.initializedStoreOnce)&&o.every(u=>za(u,l,h)),v=Qt(l,a.lng||null,h.nsMode==="fallback"?o:o[0],m),f=()=>v,d=()=>Mt(l,a.lng||null,h.nsMode==="fallback"?o:o[0],m),[P,x]=_.useState(f);let R=o.join();a.lng&&(R=`${a.lng}${R}`);const I=Jt(R),b=_.useRef(!0);_.useEffect(()=>{const{bindI18n:u,bindI18nStore:g}=h;b.current=!0,!p&&!n&&(a.lng?Ft(l,a.lng,o,()=>{b.current&&x(d)}):$t(l,o,()=>{b.current&&x(d)})),p&&I&&I!==R&&b.current&&x(d);const j=()=>{b.current&&x(d)};return u&&l?.on(u,j),g&&l?.store.on(g,j),()=>{b.current=!1,l&&u?.split(" ").forEach(i=>l.off(i,j)),g&&l&&g.split(" ").forEach(i=>l.store.off(i,j))}},[l,R]),_.useEffect(()=>{b.current&&p&&x(f)},[l,m,p]);const A=[P,l,p];if(A.t=P,A.i18n=l,A.ready=p,p||!p&&!n)return A;throw new Promise(u=>{a.lng?Ft(l,a.lng,o,()=>u()):$t(l,o,()=>u())})};function kt(e,a){return[ct(e),Nt(e)]}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,a){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,a),a)}},globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,a){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,a),a)}};const ea=Bt.error;_.lazy(()=>Ba(()=>import("./index-DYnBshQD.js").then(async e=>(await e.__tla,e)),__vite__mapDeps([0,1,2]),import.meta.url));const we=_.memo(e=>{const a=pe.c(2);let s;return a[0]!==e.children?(s=t.jsx(V,{color:"gray",size:"2",children:e.children}),a[0]=e.children,a[1]=s):s=a[1],s}),Ge=globalThis.jotaiAtomCache.get("/home/runner/work/amll-ttml-tool/amll-ttml-tool/src/components/Dialogs/import-from-text.tsx/importModeAtom",ve("importFromText.importMode","lyric"));Ge.debugLabel="importModeAtom",Ge.debugLabel="importModeAtom";const We=globalThis.jotaiAtomCache.get("/home/runner/work/amll-ttml-tool/amll-ttml-tool/src/components/Dialogs/import-from-text.tsx/lineSeparatorModeAtom",ve("importFromText.lineSeparatorMode","interleaved-line"));We.debugLabel="lineSeparatorModeAtom",We.debugLabel="lineSeparatorModeAtom";const Ke=globalThis.jotaiAtomCache.get("/home/runner/work/amll-ttml-tool/amll-ttml-tool/src/components/Dialogs/import-from-text.tsx/lineSeparatorAtom",ve("importFromText.lineSeparator","|"));Ke.debugLabel="lineSeparatorAtom",Ke.debugLabel="lineSeparatorAtom";const He=globalThis.jotaiAtomCache.get("/home/runner/work/amll-ttml-tool/amll-ttml-tool/src/components/Dialogs/import-from-text.tsx/swapTransAndRomanAtom",ve("importFromText.swapTransAndRoman",!1));He.debugLabel="swapTransAndRomanAtom",He.debugLabel="swapTransAndRomanAtom";const Ye=globalThis.jotaiAtomCache.get("/home/runner/work/amll-ttml-tool/amll-ttml-tool/src/components/Dialogs/import-from-text.tsx/wordSeparatorAtom",ve("importFromText.wordSeparator","\\"));Ye.debugLabel="wordSeparatorAtom",Ye.debugLabel="wordSeparatorAtom";const Ue=globalThis.jotaiAtomCache.get("/home/runner/work/amll-ttml-tool/amll-ttml-tool/src/components/Dialogs/import-from-text.tsx/enableSpecialPrefixAtom",ve("importFromText.enableSpecialPrefix",!1));Ue.debugLabel="enableSpecialPrefixAtom",Ue.debugLabel="enableSpecialPrefixAtom";const Je=globalThis.jotaiAtomCache.get("/home/runner/work/amll-ttml-tool/amll-ttml-tool/src/components/Dialogs/import-from-text.tsx/bgLyricPrefixAtom",ve("importFromText.bgLyricPrefix","<"));Je.debugLabel="bgLyricPrefixAtom",Je.debugLabel="bgLyricPrefixAtom";const Qe=globalThis.jotaiAtomCache.get("/home/runner/work/amll-ttml-tool/amll-ttml-tool/src/components/Dialogs/import-from-text.tsx/duetLyricPrefixAtom",ve("importFromText.duetLyricPrefix",">"));Qe.debugLabel="duetLyricPrefixAtom",Qe.debugLabel="duetLyricPrefixAtom";const Xe=globalThis.jotaiAtomCache.get("/home/runner/work/amll-ttml-tool/amll-ttml-tool/src/components/Dialogs/import-from-text.tsx/enableEmptyBeatAtom",ve("importFromText.enableEmptyBeat",!1));Xe.debugLabel="enableEmptyBeatAtom",Xe.debugLabel="enableEmptyBeatAtom";const et=globalThis.jotaiAtomCache.get("/home/runner/work/amll-ttml-tool/amll-ttml-tool/src/components/Dialogs/import-from-text.tsx/emptyBeatSymbolAtom",ve("importFromText.emptyBeatSymbol","^"));et.debugLabel="emptyBeatSymbolAtom",et.debugLabel="emptyBeatSymbolAtom";const tt=globalThis.jotaiAtomCache.get("/home/runner/work/amll-ttml-tool/amll-ttml-tool/src/components/Dialogs/import-from-text.tsx/textValueAtom",pt(""));tt.debugLabel="textValueAtom",tt.debugLabel="textValueAtom";const ta=_.memo(()=>{const e=pe.c(6),[a,s]=W(tt);let c;e[0]===Symbol.for("react.memo_cache_sentinel")?(c={height:"calc(80vh - 5em)",flex:"1 1 auto",fontFamily:"var(--code-font-family)"},e[0]=c):c=e[0];let r;e[1]!==s?(r=h=>s(h.currentTarget.value),e[1]=s,e[2]=r):r=e[2];let l;return e[3]!==r||e[4]!==a?(l=t.jsx(zt,{style:c,value:a,onChange:r}),e[3]=r,e[4]=a,e[5]=l):l=e[5],l}),aa=()=>{const e=pe.c(91),[a,s]=W(qa),[c,r]=W(Ge),[l,h]=W(We),[n,m]=W(Ke),[o,p]=W(He),[v,f]=W(Ye),[d,P]=W(Ue),[x,R]=W(Je),[I,b]=W(Qe),[A,u]=W(Xe),[g,j]=W(et),i=Vt();let L;e[0]!==i?(L=ie=>{const ut=i.get(Ge),Ia=i.get(We),Da=i.get(Ke),Pa=i.get(He),Dt=i.get(Ye),Ra=i.get(Ue),Pt=i.get(Je),Rt=i.get(Qe),Oa=i.get(Xe),gt=i.get(et),Re=ie.split(`
`),Ve=[],xt=function(U,oe,Se){const be=U===void 0?"":U,Ze="",Oe="";let ye=be,Me=!1,Be=!1;if(Ra)for(;;)if(ye.startsWith(Pt))Me=!0,ye=ye.slice(Pt.length);else if(ye.startsWith(Rt))Be=!0,ye=ye.slice(Rt.length);else break;const Ot={...Ga(),words:[{...vt(),word:ye}],translatedLyric:Ze,romanLyric:Oe,isBG:Me,isDuet:Be};return Ve.push(Ot),Ot},Ea=function(){for(const U of Re)xt(U)},bt=function(U,oe){switch(Ia){case"interleaved-line":{let Se=1;U&&Se++,oe&&Se++;for(let be=0;be<Re.length;be=be+Se,be){const Ze=Re[be];let Oe=0;const ye=U?Re[be+ ++Oe]:"",Me=oe?Re[be+ ++Oe]:"",Be=xt(Ze);U&&(Be[U]=ye),oe&&(Be[oe]=Me)}return}case"same-line-separator":{for(const Se of Re){const be=Se.split(Da),Ze=be[0],Oe=U?be[1]:"",ye=oe?be[2]:"",Me=xt(Ze);U&&(Me[U]=Oe),oe&&(Me[oe]=ye)}return}}};e:switch(ut){case"lyric":{Ea();break e}case"lyric-trans":{bt("translatedLyric");break e}case"lyric-roman":{bt("romanLyric");break e}case"lyric-trans-roman":bt("translatedLyric","romanLyric")}if(Pa)for(const U of Ve){const[oe,Se]=[U.translatedLyric,U.romanLyric];U.romanLyric=oe,U.translatedLyric=Se}if(Dt.length>0)for(const U of Ve){const oe=U.words.map(la).join("");U.words=oe.split(Dt).map(sa)}if(Oa&&gt.length>0)for(const U of Ve)for(const oe of U.words)for(;oe.word.endsWith(gt);)oe.word=oe.word.slice(0,-gt.length),oe.emptyBeat=oe.emptyBeat+1;i.set(qe,{lyricLines:Ve,metadata:[]})},e[0]=i,e[1]=L):L=e[1];const O=L;let M;e[2]===Symbol.for("react.memo_cache_sentinel")?(M=t.jsx(Ee,{style:{flex:"1 1 auto"},children:"\u5BFC\u5165\u7EAF\u6587\u672C\u6B4C\u8BCD"}),e[2]=M):M=e[2];let T;e[3]!==O||e[4]!==s||e[5]!==i?(T=t.jsxs(Y,{gap:"2",align:"center",mb:"2",children:[M,t.jsx(Ae,{onClick:()=>{try{O(i.get(tt)),s(!1)}catch(ie){const ut=ie;ea("\u5BFC\u5165\u7EAF\u6587\u672C\u6B4C\u8BCD\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u8F93\u5165\u7684\u6587\u672C\u662F\u5426\u6B63\u786E\uFF0C\u6216\u8005\u5BFC\u5165\u8BBE\u7F6E\u662F\u5426\u6B63\u786E"),console.error(ut)}},children:"\u5BFC\u5165\u6B4C\u8BCD"})]}),e[3]=O,e[4]=s,e[5]=i,e[6]=T):T=e[6];let k,Z;e[7]===Symbol.for("react.memo_cache_sentinel")?(k={initial:"column",sm:"row"},Z=t.jsx(ta,{}),e[7]=k,e[8]=Z):(k=e[7],Z=e[8]);let y,q;e[9]===Symbol.for("react.memo_cache_sentinel")?(y={whiteSpace:"nowrap",flex:"0 0 auto",alignItems:"center",alignContent:"start",textAlign:"end"},q=t.jsx(we,{children:"\u5BFC\u5165\u6A21\u5F0F"}),e[9]=y,e[10]=q):(y=e[9],q=e[10]);let z;e[11]!==r?(z=ie=>r(ie),e[11]=r,e[12]=z):z=e[12];let K;e[13]===Symbol.for("react.memo_cache_sentinel")?(K=t.jsx(ft,{}),e[13]=K):K=e[13];let le;e[14]===Symbol.for("react.memo_cache_sentinel")?(le=t.jsxs(yt,{children:[t.jsx(Ce,{value:"lyric",children:"\u4EC5\u6B4C\u8BCD"}),t.jsx(Ce,{value:"lyric-trans",children:"\u6B4C\u8BCD\u548C\u7FFB\u8BD1\u6B4C\u8BCD"}),t.jsx(Ce,{value:"lyric-roman",children:"\u6B4C\u8BCD\u548C\u97F3\u8BD1\u6B4C\u8BCD"}),t.jsx(Ce,{value:"lyric-trans-roman",children:"\u6B4C\u8BCD\u548C\u7FFB\u8BD1\u3001\u97F3\u8BD1\u6B4C\u8BCD"})]}),e[14]=le):le=e[14];let G;e[15]!==c||e[16]!==z?(G=t.jsxs(wt,{value:c,onValueChange:z,children:[K,le]}),e[15]=c,e[16]=z,e[17]=G):G=e[17];let B;e[18]===Symbol.for("react.memo_cache_sentinel")?(B=t.jsx(we,{children:"\u6B4C\u8BCD\u5206\u884C\uFF08\u7FFB\u8BD1\u548C\u97F3\u8BD1\uFF09\u6A21\u5F0F"}),e[18]=B):B=e[18];const te=c==="lyric";let F;e[19]!==h?(F=ie=>h(ie),e[19]=h,e[20]=F):F=e[20];let J;e[21]===Symbol.for("react.memo_cache_sentinel")?(J=t.jsx(ft,{}),e[21]=J):J=e[21];let ge;e[22]===Symbol.for("react.memo_cache_sentinel")?(ge=t.jsxs(yt,{children:[t.jsx(Ce,{value:"interleaved-line",children:"\u591A\u884C\u4EA4\u9519\u5206\u9694"}),t.jsx(Ce,{value:"same-line-separator",children:"\u540C\u884C\u5206\u9694"})]}),e[22]=ge):ge=e[22];let $;e[23]!==l||e[24]!==te||e[25]!==F?($=t.jsxs(wt,{disabled:te,value:l,onValueChange:F,children:[J,ge]}),e[23]=l,e[24]=te,e[25]=F,e[26]=$):$=e[26];let he;e[27]===Symbol.for("react.memo_cache_sentinel")?(he=t.jsx(we,{children:"\u6B4C\u8BCD\u884C\u5206\u9694\u7B26"}),e[27]=he):he=e[27];const xe=c==="lyric"||l!=="same-line-separator";let Q;e[28]!==m?(Q=ie=>m(ie.currentTarget.value),e[28]=m,e[29]=Q):Q=e[29];let se;e[30]!==n||e[31]!==xe||e[32]!==Q?(se=t.jsx(fe,{disabled:xe,value:n,onChange:Q}),e[30]=n,e[31]=xe,e[32]=Q,e[33]=se):se=e[33];let me;e[34]===Symbol.for("react.memo_cache_sentinel")?(me=t.jsx(we,{children:"\u4EA4\u6362\u7FFB\u8BD1\u884C\u548C\u97F3\u8BD1\u884C"}),e[34]=me):me=e[34];let ce;e[35]!==p||e[36]!==o?(ce=t.jsx(_t,{checked:o,onCheckedChange:p}),e[35]=p,e[36]=o,e[37]=ce):ce=e[37];let ne;e[38]===Symbol.for("react.memo_cache_sentinel")?(ne=t.jsx(we,{children:"\u5355\u8BCD\u5206\u9694\u7B26"}),e[38]=ne):ne=e[38];let X;e[39]!==f?(X=ie=>f(ie.currentTarget.value),e[39]=f,e[40]=X):X=e[40];let de;e[41]!==X||e[42]!==v?(de=t.jsx(fe,{value:v,onChange:X}),e[41]=X,e[42]=v,e[43]=de):de=e[43];let ee;e[44]===Symbol.for("react.memo_cache_sentinel")?(ee=t.jsx(we,{children:"\u542F\u7528\u7279\u6B8A\u524D\u7F00"}),e[44]=ee):ee=e[44];let S;e[45]!==d||e[46]!==P?(S=t.jsx(_t,{checked:d,onCheckedChange:P}),e[45]=d,e[46]=P,e[47]=S):S=e[47];let ae;e[48]===Symbol.for("react.memo_cache_sentinel")?(ae=t.jsx(we,{children:"\u80CC\u666F\u6B4C\u8BCD\u524D\u7F00"}),e[48]=ae):ae=e[48];const D=!d;let re;e[49]!==R?(re=ie=>R(ie.currentTarget.value),e[49]=R,e[50]=re):re=e[50];let w;e[51]!==x||e[52]!==D||e[53]!==re?(w=t.jsx(fe,{disabled:D,value:x,onChange:re}),e[51]=x,e[52]=D,e[53]=re,e[54]=w):w=e[54];let C;e[55]===Symbol.for("react.memo_cache_sentinel")?(C=t.jsx(we,{children:"\u5BF9\u5531\u6B4C\u8BCD\u524D\u7F00"}),e[55]=C):C=e[55];const N=!d;let H;e[56]!==b?(H=ie=>b(ie.currentTarget.value),e[56]=b,e[57]=H):H=e[57];let ue;e[58]!==I||e[59]!==N||e[60]!==H?(ue=t.jsx(fe,{disabled:N,value:I,onChange:H}),e[58]=I,e[59]=N,e[60]=H,e[61]=ue):ue=e[61];let je;e[62]===Symbol.for("react.memo_cache_sentinel")?(je=t.jsx(we,{children:"\u542F\u7528\u7A7A\u62CD"}),e[62]=je):je=e[62];let _e;e[63]!==A||e[64]!==u?(_e=t.jsx(_t,{checked:A,onCheckedChange:u}),e[63]=A,e[64]=u,e[65]=_e):_e=e[65];let Te;e[66]===Symbol.for("react.memo_cache_sentinel")?(Te=t.jsx(we,{children:"\u7A7A\u62CD\u7B26\u53F7"}),e[66]=Te):Te=e[66];const ze=!A;let ke;e[67]!==j?(ke=ie=>j(ie.currentTarget.value),e[67]=j,e[68]=ke):ke=e[68];let Ie;e[69]!==g||e[70]!==ze||e[71]!==ke?(Ie=t.jsx(fe,{disabled:ze,value:g,onChange:ke}),e[69]=g,e[70]=ze,e[71]=ke,e[72]=Ie):Ie=e[72];let De;e[73]!==G||e[74]!==$||e[75]!==se||e[76]!==ce||e[77]!==de||e[78]!==S||e[79]!==w||e[80]!==ue||e[81]!==_e||e[82]!==Ie?(De=t.jsxs(Y,{gap:"4",direction:k,children:[Z,t.jsxs(Zt,{columns:"2",gapY:"2",gapX:"4",style:y,children:[q,G,B,$,he,se,me,ce,ne,de,ee,S,ae,w,C,ue,je,_e,Te,Ie]})]}),e[73]=G,e[74]=$,e[75]=se,e[76]=ce,e[77]=de,e[78]=S,e[79]=w,e[80]=ue,e[81]=_e,e[82]=Ie,e[83]=De):De=e[83];let Pe;e[84]!==T||e[85]!==De?(Pe=t.jsx(Fe,{maxWidth:"100%",maxHeight:"100%",children:t.jsxs(Y,{direction:"column",children:[T,De]})}),e[84]=T,e[85]=De,e[86]=Pe):Pe=e[86];let nt;return e[87]!==a||e[88]!==s||e[89]!==Pe?(nt=t.jsx($e,{open:a,onOpenChange:s,children:Pe}),e[87]=a,e[88]=s,e[89]=Pe,e[90]=nt):nt=e[90],nt};function la(e){return e.word}function sa(e){return{...vt(),word:e}}const na="_metadataTable_1c09v_1",oa="_metadataInput_1c09v_14",ca="_newItemBtnRow_1c09v_17",ra="_newItemLine_1c09v_24",at={metadataTable:na,metadataInput:oa,newItemBtnRow:ca,newItemLine:ra};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,a){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,a),a)}},globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,a){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,a),a)}};const ia=()=>{const e=pe.c(104),[a,s]=W(Wa),[c,r]=_.useState(""),[l,h]=kt(qe),{t:n}=Xt();let m,o;e[0]!==n?(o=n("metadataDialog.builtinOptions.musicName","\u6B4C\u66F2\u540D\u79F0"),e[0]=n,e[1]=o):o=e[1];let p;e[2]!==o?(p={label:o,value:"musicName"},e[2]=o,e[3]=p):p=e[3];let v;e[4]!==n?(v=n("metadataDialog.builtinOptions.artists","\u6B4C\u66F2\u7684\u827A\u672F\u5BB6"),e[4]=n,e[5]=v):v=e[5];let f;e[6]!==v?(f={label:v,value:"artists"},e[6]=v,e[7]=f):f=e[7];let d;e[8]!==n?(d=n("metadataDialog.builtinOptions.album","\u6B4C\u66F2\u7684\u4E13\u8F91\u540D"),e[8]=n,e[9]=d):d=e[9];let P;e[10]!==d?(P={label:d,value:"album"},e[10]=d,e[11]=P):P=e[11];let x;e[12]!==n?(x=n("metadataDialog.builtinOptions.ncmMusicId","\u7F51\u6613\u4E91\u97F3\u4E50 ID"),e[12]=n,e[13]=x):x=e[13];let R;e[14]!==x?(R={label:x,value:"ncmMusicId"},e[14]=x,e[15]=R):R=e[15];let I;e[16]!==n?(I=n("metadataDialog.builtinOptions.qqMusicId","QQ \u97F3\u4E50 ID"),e[16]=n,e[17]=I):I=e[17];let b;e[18]!==I?(b={label:I,value:"qqMusicId"},e[18]=I,e[19]=b):b=e[19];let A;e[20]!==n?(A=n("metadataDialog.builtinOptions.spotifyId","Spotify \u97F3\u4E50 ID"),e[20]=n,e[21]=A):A=e[21];let u;e[22]!==A?(u={label:A,value:"spotifyId"},e[22]=A,e[23]=u):u=e[23];let g;e[24]!==n?(g=n("metadataDialog.builtinOptions.appleMusicId","Apple Music \u97F3\u4E50 ID"),e[24]=n,e[25]=g):g=e[25];let j;e[26]!==g?(j={label:g,value:"appleMusicId"},e[26]=g,e[27]=j):j=e[27];let i;e[28]!==n?(i=n("metadataDialog.builtinOptions.isrc","\u6B4C\u66F2\u7684 ISRC \u53F7\u7801"),e[28]=n,e[29]=i):i=e[29];let L;e[30]!==i?(L={label:i,value:"isrc"},e[30]=i,e[31]=L):L=e[31];let O;e[32]!==n?(O=n("metadataDialog.builtinOptions.ttmlAuthorGithub","\u9010\u8BCD\u6B4C\u8BCD\u4F5C\u8005 GitHub ID"),e[32]=n,e[33]=O):O=e[33];let M;e[34]!==O?(M={label:O,value:"ttmlAuthorGithub"},e[34]=O,e[35]=M):M=e[35];let T;e[36]!==n?(T=n("metadataDialog.builtinOptions.ttmlAuthorGithubLogin","\u9010\u8BCD\u6B4C\u8BCD\u4F5C\u8005 GitHub \u7528\u6237\u540D"),e[36]=n,e[37]=T):T=e[37];let k;e[38]!==T?(k={label:T,value:"ttmlAuthorGithubLogin"},e[38]=T,e[39]=k):k=e[39];let Z;e[40]!==b||e[41]!==u||e[42]!==j||e[43]!==L||e[44]!==M||e[45]!==p||e[46]!==k||e[47]!==f||e[48]!==P||e[49]!==R?(Z=[p,f,P,R,b,u,j,L,M,k],e[40]=b,e[41]=u,e[42]=j,e[43]=L,e[44]=M,e[45]=p,e[46]=k,e[47]=f,e[48]=P,e[49]=R,e[50]=Z):Z=e[50],m=Z;const y=m;let q;e[51]!==y?(q=w=>{const C=y.find(N=>N.value===w);return C?C.label:w},e[51]=y,e[52]=q):q=e[52];const z=q;let K;e[53]===Symbol.for("react.memo_cache_sentinel")?(K=t.jsx(Ee,{children:"\u5143\u6570\u636E\u7F16\u8F91\u5668"}),e[53]=K):K=e[53];let le;e[54]===Symbol.for("react.memo_cache_sentinel")?(le=t.jsx("thead",{children:t.jsxs("tr",{children:[t.jsx("th",{style:{width:"1%"},children:"\u5143\u6570\u636E\u7C7B\u578B"}),t.jsx("th",{children:"\u503C"})]})}),e[54]=le):le=e[54];let G;e[55]!==l.metadata.length?(G=l.metadata.length===0&&t.jsx("tr",{style:{height:"4em"},children:t.jsx("td",{colSpan:2,style:{color:"var(--gray-9)",textAlign:"center"},children:"\u65E0\u4EFB\u4F55\u5143\u6570\u636E"})}),e[55]=l.metadata.length,e[56]=G):G=e[56];let B;if(e[57]!==l.metadata||e[58]!==h||e[59]!==z){let w;e[61]!==h||e[62]!==z?(w=(C,N)=>t.jsxs(_.Fragment,{children:[C.value.map((H,ue)=>t.jsxs("tr",{children:[t.jsx("td",{children:ue===0&&z(C.key)}),t.jsx("td",{children:t.jsxs(Y,{gap:"1",ml:"2",mt:"1",children:[t.jsx(fe,{value:H,className:at.metadataInput,onChange:je=>{const _e=je.currentTarget.value;h(Te=>{Te.metadata[N].value[ue]=_e})}}),t.jsx(qt,{variant:"soft",onClick:()=>{h(je=>{je.metadata[N].value.splice(ue,1),je.metadata[N].value.length===0&&je.metadata.splice(N,1)})},children:t.jsx(Ut,{})})]})})]},`metadata-${C.key}-${ue}`)),t.jsxs("tr",{className:at.newItemLine,children:[t.jsx("td",{}),t.jsx("td",{className:at.newItemBtnRow,children:t.jsx(Ae,{variant:"soft",my:"1",onClick:()=>{h(H=>{H.metadata[N].value.push("")})},children:"\u6DFB\u52A0"})})]})]},`metadata-${C.key}`),e[61]=h,e[62]=z,e[63]=w):w=e[63],B=l.metadata.map(w),e[57]=l.metadata,e[58]=h,e[59]=z,e[60]=B}else B=e[60];let te;e[64]!==G||e[65]!==B?(te=t.jsxs("table",{className:at.metadataTable,children:[le,t.jsxs("tbody",{children:[G,B]})]}),e[64]=G,e[65]=B,e[66]=te):te=e[66];let F;e[67]===Symbol.for("react.memo_cache_sentinel")?(F={sm:"row",initial:"column"},e[67]=F):F=e[67];let J;e[68]===Symbol.for("react.memo_cache_sentinel")?(J={flex:"1 0 auto"},e[68]=J):J=e[68];let ge;e[69]===Symbol.for("react.memo_cache_sentinel")?(ge=t.jsx(Ha,{style:J,children:t.jsxs(Ae,{variant:"soft",children:["\u6DFB\u52A0\u65B0\u952E\u503C",t.jsx(Ya,{})]})}),e[69]=ge):ge=e[69];let $;e[70]===Symbol.for("react.memo_cache_sentinel")?($={flexGrow:"1"},e[70]=$):$=e[70];let he;e[71]===Symbol.for("react.memo_cache_sentinel")?(he=w=>r(w.currentTarget.value),e[71]=he):he=e[71];let xe;e[72]!==c?(xe=t.jsx(fe,{style:$,placeholder:"\u81EA\u5B9A\u4E49\u952E\u540D",value:c,onChange:he}),e[72]=c,e[73]=xe):xe=e[73];let Q;e[74]!==c||e[75]!==h?(Q=()=>{h(w=>{const C=w.metadata.find(N=>N.key===c);C?C.value.push(""):w.metadata.push({key:c,value:[""]})})},e[74]=c,e[75]=h,e[76]=Q):Q=e[76];let se;e[77]===Symbol.for("react.memo_cache_sentinel")?(se=t.jsx(Yt,{}),e[77]=se):se=e[77];let me;e[78]!==Q?(me=t.jsx(qt,{variant:"soft",onClick:Q,children:se}),e[78]=Q,e[79]=me):me=e[79];let ce;e[80]!==xe||e[81]!==me?(ce=t.jsxs(Y,{gap:"1",children:[xe,me]}),e[80]=xe,e[81]=me,e[82]=ce):ce=e[82];let ne;e[83]!==y||e[84]!==h?(ne=y.map(w=>t.jsx(Ka,{shortcut:w.value,onClick:()=>{h(C=>{const N=C.metadata.find(H=>H.key===w.value);N?N.value.push(""):C.metadata.push({key:w.value,value:[""]})})},children:w.label},`builtin-option-${w.value}`)),e[83]=y,e[84]=h,e[85]=ne):ne=e[85];let X;e[86]!==ce||e[87]!==ne?(X=t.jsxs(Ua,{children:[ge,t.jsxs(Ja,{children:[ce,ne]})]}),e[86]=ce,e[87]=ne,e[88]=X):X=e[88];let de;e[89]===Symbol.for("react.memo_cache_sentinel")?(de={flex:"1 0 auto"},e[89]=de):de=e[89];let ee;e[90]!==y||e[91]!==h?(ee=t.jsx(Ae,{style:de,variant:"soft",onClick:()=>{h(w=>{for(const C of y)w.metadata.find(N=>N.key===C.value)||w.metadata.push({key:C.value,value:[""]})})},children:"\u4E00\u952E\u6DFB\u52A0\u6240\u6709\u9884\u8BBE\u952E"}),e[90]=y,e[91]=h,e[92]=ee):ee=e[92];let S;e[93]===Symbol.for("react.memo_cache_sentinel")?(S=t.jsx(Ae,{asChild:!0,variant:"soft",children:t.jsxs("a",{target:"_blank",rel:"noreferrer",href:"https://github.com/Steve-xmh/amll-ttml-tool/wiki/%E6%AD%8C%E8%AF%8D%E5%85%83%E6%95%B0%E6%8D%AE",children:[t.jsx(mt,{}),"\u4E86\u89E3\u8BE6\u60C5"]})}),e[93]=S):S=e[93];let ae;e[94]!==X||e[95]!==ee?(ae=t.jsxs(Y,{gap:"1",direction:F,children:[X,ee,S]}),e[94]=X,e[95]=ee,e[96]=ae):ae=e[96];let D;e[97]!==te||e[98]!==ae?(D=t.jsxs(Fe,{children:[K,te,ae]}),e[97]=te,e[98]=ae,e[99]=D):D=e[99];let re;return e[100]!==a||e[101]!==s||e[102]!==D?(re=t.jsx($e,{open:a,onOpenChange:s,children:D}),e[100]=a,e[101]=s,e[102]=D,e[103]=re):re=e[103],re},ha="2025-04-28T07:29:42.791Z",It="cc1c5715873899d62e128c09d5a43df9d5130461";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,a){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,a),a)}},globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,a){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,a),a)}};const ma=()=>{const e=pe.c(4);let a,s,c;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=t.jsx(V,{as:"div",children:"Apple Music-like lyrics TTML Tools"}),s=t.jsx(V,{as:"div",size:"2",mb:"4",children:"By SteveXMH"}),c=t.jsxs(V,{as:"div",size:"2",color:"gray",children:["\u6784\u5EFA\u65E5\u671F\uFF1A",ha]}),e[0]=a,e[1]=s,e[2]=c):(a=e[0],s=e[1],c=e[2]);let r;return e[3]===Symbol.for("react.memo_cache_sentinel")?(r=t.jsxs(t.Fragment,{children:[a,s,c,t.jsxs(V,{as:"div",size:"2",color:"gray",children:["Git \u63D0\u4EA4\uFF1A",t.jsx(Ae,{asChild:!0,variant:"ghost",children:t.jsx("a",{href:`https://github.com/Steve-xmh/amll-ttml-tool/commit/${It}`,target:"_blank",rel:"noreferrer",children:It})})]})]}),e[3]=r):r=e[3],r};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,a){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,a),a)}},globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,a){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,a),a)}};const da=()=>{const e=pe.c(45),[a,s]=W(Gt),[c,r]=W(Qa),[l,h]=W(Xa);let n,m;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=t.jsx(V,{children:"\u6253\u8F74\u65F6\u95F4\u6233\u5224\u5B9A\u6A21\u5F0F"}),m=t.jsx(V,{size:"1",color:"gray",children:"\u8BBE\u7F6E\u6253\u8F74\u65F6\u95F4\u6233\u7684\u5224\u5B9A\u6A21\u5F0F\uFF0C\u9ED8\u8BA4\u4E3A\u201C\u9996\u4E2A\u6309\u952E\u6309\u4E0B\u65F6\u95F4\u201D\u3002"}),e[0]=n,e[1]=m):(n=e[0],m=e[1]);let o;e[2]!==s?(o=q=>s(q),e[2]=s,e[3]=o):o=e[3];let p;e[4]===Symbol.for("react.memo_cache_sentinel")?(p=t.jsx(ft,{}),e[4]=p):p=e[4];let v;e[5]===Symbol.for("react.memo_cache_sentinel")?(v=t.jsxs(yt,{children:[t.jsx(Ce,{value:Ne.FirstKeyDownTime,children:"\u9996\u4E2A\u6309\u952E\u6309\u4E0B\u65F6\u95F4"}),t.jsx(Ce,{value:Ne.LastKeyUpTime,children:"\u6700\u540E\u4E00\u4E2A\u6309\u952E\u62AC\u8D77\u65F6\u95F4"}),t.jsx(Ce,{value:Ne.MiddleKeyTime,children:"\u53D6\u6309\u952E\u6309\u4E0B\u548C\u62AC\u8D77\u7684\u4E2D\u95F4\u503C"})]}),e[5]=v):v=e[5];let f;e[6]!==a||e[7]!==o?(f=t.jsx(V,{as:"label",children:t.jsxs(Y,{direction:"column",gap:"2",align:"start",children:[n,m,t.jsxs(wt,{value:a,onValueChange:o,children:[p,v]})]})}),e[6]=a,e[7]=o,e[8]=f):f=e[8];let d,P;e[9]===Symbol.for("react.memo_cache_sentinel")?(d={alignSelf:"stretch"},P=t.jsx(V,{children:"\u97F3\u4E50\u97F3\u91CF"}),e[9]=d,e[10]=P):(d=e[9],P=e[10]);const x=c*100;let R;e[11]!==x?(R=x.toFixed(),e[11]=x,e[12]=R):R=e[12];let I;e[13]!==R?(I=t.jsxs(Y,{align:"center",justify:"between",style:d,children:[P,t.jsxs(V,{wrap:"nowrap",color:"gray",size:"1",children:[R,"%"]})]}),e[13]=R,e[14]=I):I=e[14];let b;e[15]!==c?(b=[c],e[15]=c,e[16]=b):b=e[16];let A;e[17]!==r?(A=q=>r(q[0]),e[17]=r,e[18]=A):A=e[18];let u;e[19]!==b||e[20]!==A?(u=t.jsx(Wt,{min:0,max:1,defaultValue:b,step:.01,onValueChange:A}),e[19]=b,e[20]=A,e[21]=u):u=e[21];let g;e[22]!==I||e[23]!==u?(g=t.jsxs(Y,{direction:"column",gap:"2",my:"3",align:"start",children:[I,u]}),e[22]=I,e[23]=u,e[24]=g):g=e[24];let j,i;e[25]===Symbol.for("react.memo_cache_sentinel")?(j={alignSelf:"stretch"},i=t.jsx(V,{wrap:"nowrap",children:"\u64AD\u653E\u901F\u5EA6"}),e[25]=j,e[26]=i):(j=e[25],i=e[26]);let L;e[27]!==l?(L=l.toFixed(2),e[27]=l,e[28]=L):L=e[28];let O;e[29]!==L?(O=t.jsxs(Y,{align:"center",justify:"between",style:j,children:[i,t.jsxs(V,{wrap:"nowrap",color:"gray",size:"1",children:[L,"x"]})]}),e[29]=L,e[30]=O):O=e[30];let M;e[31]!==l?(M=[l],e[31]=l,e[32]=M):M=e[32];let T;e[33]!==h?(T=q=>h(q[0]),e[33]=h,e[34]=T):T=e[34];let k;e[35]!==M||e[36]!==T?(k=t.jsx(Wt,{min:.05,max:2,defaultValue:M,step:.05,onValueChange:T}),e[35]=M,e[36]=T,e[37]=k):k=e[37];let Z;e[38]!==O||e[39]!==k?(Z=t.jsxs(Y,{direction:"column",gap:"2",my:"3",align:"start",children:[O,k]}),e[38]=O,e[39]=k,e[40]=Z):Z=e[40];let y;return e[41]!==g||e[42]!==Z||e[43]!==f?(y=t.jsxs(t.Fragment,{children:[f,g,Z]}),e[41]=g,e[42]=Z,e[43]=f,e[44]=y):y=e[44],y};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,a){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,a),a)}},globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,a){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,a),a)}};const E=(e,a)=>({atom:e,label:a}),ua=[E(al,"\u65B0\u5EFA\u6587\u4EF6"),E(ll,"\u6253\u5F00\u6587\u4EF6"),E(sl,"\u4FDD\u5B58\u6587\u4EF6"),E(nl,"\u6253\u5F00\u97F3\u9891\u6587\u4EF6"),E(ol,"\u64A4\u9500"),E(cl,"\u91CD\u505A"),E(rl,"\u5168\u9009"),E(il,"\u53CD\u9009"),E(hl,"\u9009\u4E2D\u540C\u7C7B\u5355\u8BCD"),E(ml,"\u5220\u9664\u6240\u9009"),E(dl,"\u6A21\u5F0F\u5207\u6362 - \u5207\u6362\u5230\u7F16\u8F91\u6A21\u5F0F"),E(ul,"\u6A21\u5F0F\u5207\u6362 - \u5207\u6362\u5230\u6253\u8F74\u6A21\u5F0F"),E(gl,"\u6A21\u5F0F\u5207\u6362 - \u5207\u6362\u5230\u9884\u89C8\u6A21\u5F0F"),E(xl,"\u6253\u8F74 - \u79FB\u52A8\u5230\u4E0B\u4E00\u4E2A\u5355\u8BCD"),E(bl,"\u6253\u8F74 - \u79FB\u52A8\u5230\u4E0A\u4E00\u4E2A\u5355\u8BCD"),E(jl,"\u6253\u8F74 - \u79FB\u52A8\u5230\u4E0B\u4E00\u884C\u5F00\u5934"),E(pl,"\u6253\u8F74 - \u79FB\u52A8\u5230\u4E0A\u4E00\u884C\u5F00\u5934"),E(fl,"\u6253\u8F74 - \u521D\u59CB\u6253\u8F74"),E(Kt,"\u6253\u8F74 - \u6B65\u8FDB\u6253\u8F74"),E(yl,"\u6253\u8F74 - \u95F4\u594F\u6253\u8F74"),E(wl,"\u64AD\u653E - \u6682\u505C/\u7EE7\u7EED\u64AD\u653E"),E(_l,"\u64AD\u653E - \u5FEB\u8FDB 5 \u79D2"),E(vl,"\u64AD\u653E - \u5FEB\u9000 5 \u79D2"),E(Al,"\u64AD\u653E - \u8C03\u9AD8\u97F3\u91CF"),E(Cl,"\u64AD\u653E - \u8C03\u4F4E\u97F3\u91CF"),E(Tl,"\u64AD\u653E - \u589E\u52A0\u64AD\u653E\u901F\u5EA6"),E(Sl,"\u64AD\u653E - \u964D\u4F4E\u64AD\u653E\u901F\u5EA6")],ga=({entry:e})=>{const[a,s]=W(e.atom),[c,r]=_.useState(!1);return t.jsxs(t.Fragment,{children:[t.jsx(At,{children:e.label}),t.jsx(At,{children:t.jsx(fe,{onClick:async()=>{try{r(!0);const l=await el();s(l)}catch{}finally{r(!1)}},size:"1",value:c?"\u8BF7\u6309\u4E0B\u6309\u952E...":tl(a),readOnly:!0})})]})},xa=()=>{const e=pe.c(1);let a;return e[0]===Symbol.for("react.memo_cache_sentinel")?(a=t.jsx(Zt,{columns:"2",gapY:"2",children:ua.map(ba)}),e[0]=a):a=e[0],a};function ba(e){return t.jsx(ga,{entry:e},e.label)}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,a){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,a),a)}},globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,a){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,a),a)}};const ja=_.memo(()=>{const e=pe.c(8),[a,s]=W(Ll);let c;e[0]===Symbol.for("react.memo_cache_sentinel")?(c=t.jsx(Ee,{children:"\u9996\u9009\u9879"}),e[0]=c):c=e[0];let r;e[1]===Symbol.for("react.memo_cache_sentinel")?(r=t.jsxs(Ml,{children:[t.jsx(Ct,{value:"common",children:"\u5E38\u89C4"}),t.jsx(Ct,{value:"keybinding",children:"\u6309\u952E\u7ED1\u5B9A"}),t.jsx(Ct,{value:"about",children:"\u5173\u4E8E"})]}),e[1]=r):r=e[1];let l;e[2]===Symbol.for("react.memo_cache_sentinel")?(l=t.jsx(Tt,{value:"common",children:t.jsx(da,{})}),e[2]=l):l=e[2];let h;e[3]===Symbol.for("react.memo_cache_sentinel")?(h=t.jsx(Tt,{value:"keybinding",children:t.jsx(xa,{})}),e[3]=h):h=e[3];let n;e[4]===Symbol.for("react.memo_cache_sentinel")?(n=t.jsxs(Fe,{children:[c,t.jsxs(kl,{children:[r,t.jsxs(At,{pt:"3",children:[l,h,t.jsx(Tt,{value:"about",children:t.jsx(ma,{})})]})]})]}),e[4]=n):n=e[4];let m;return e[5]!==s||e[6]!==a?(m=t.jsx($e,{open:a,onOpenChange:s,children:n}),e[5]=s,e[6]=a,e[7]=m):m=e[7],m});globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,a){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,a),a)}},globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,a){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,a),a)}};const lt=globalThis.jotaiAtomCache.get("/home/runner/work/amll-ttml-tool/amll-ttml-tool/src/components/Dialogs/submit-to-amll-db.tsx/metadataAtom",pt(e=>e(qe).metadata));lt.debugLabel="metadataAtom",lt.debugLabel="metadataAtom";const dt=globalThis.jotaiAtomCache.get("/home/runner/work/amll-ttml-tool/amll-ttml-tool/src/components/Dialogs/submit-to-amll-db.tsx/issuesAtom",pt(e=>{const a=[],s=e(lt);s.findIndex(r=>r.key==="musicName"&&r.value.length>0)===-1&&a.push("\u5143\u6570\u636E\u7F3A\u5C11\u97F3\u4E50\u540D\u79F0"),s.findIndex(r=>r.key==="artists"&&r.value.length>0)===-1&&a.push("\u5143\u6570\u636E\u7F3A\u5C11\u97F3\u4E50\u4F5C\u8005"),s.findIndex(r=>r.key==="album"&&r.value.length>0)===-1&&a.push("\u5143\u6570\u636E\u7F3A\u5C11\u97F3\u4E50\u4E13\u8F91\u540D\u79F0");const c=new Set(["ncmMusicId","qqMusicId","spotifyId","appleMusicId"]);return s.findIndex(r=>c.has(r.key)&&r.value.length>0)===-1&&a.push("\u5143\u6570\u636E\u7F3A\u5C11\u97F3\u4E50\u5E73\u53F0\u5BF9\u4E8E\u6B4C\u66F2 ID"),a}));dt.debugLabel="issuesAtom",dt.debugLabel="issuesAtom";const pa=_.memo(()=>{const e=pe.c(48),[a,s]=W(Il),[c,r]=W(Dl),[l,h]=W(Pl),n=ct(lt),m=ct(dt),[o,p]=_.useState(""),[v,f]=_.useState(""),[d,P]=_.useState(!1),[x,R]=_.useState("\u65B0\u6B4C\u8BCD\u63D0\u4EA4"),I=Vt();let b;e[0]!==v||e[1]!==o||e[2]!==d||e[3]!==I||e[4]!==x?(b=async function(){if(!d){P(!0);try{const F=I.get(qe),J=Rl(F),ge=await fetch("https://amll-ttml-tools-dpaste-proxy.stevexmh.net/74335190-b44f-4468-b5ce-0dd9f25bef98",{method:"POST",mode:"cors",body:J}).then(fa),$=new URL("https://github.com/Steve-xmh/amll-ttml-db/issues/new");$.searchParams.append("labels","\u6B4C\u8BCD\u63D0\u4EA4/\u8865\u6B63"),$.searchParams.append("template","submit-lyric.yml"),$.searchParams.append("title",`[\u6B4C\u8BCD\u63D0\u4EA4/\u4FEE\u6B63] ${o}`),$.searchParams.append("song-name",o),$.searchParams.append("ttml-download-url",new URL(ge).toString()),$.searchParams.append("upload-reason",x),$.searchParams.append("comment",v),open($.toString())}catch(F){console.warn("Submit failed",F),Bt.error("\u63D0\u4EA4\u53D1\u751F\u9519\u8BEF\uFF0C\u8BF7\u67E5\u770B\u63A7\u5236\u53F0\u786E\u8BA4\u539F\u56E0\uFF01")}P(!1)}},e[0]=v,e[1]=o,e[2]=d,e[3]=I,e[4]=x,e[5]=b):b=e[5];const A=b;let u,g;e[6]!==l||e[7]!==n?(u=()=>{if(l){const F=n.find(ya)?.value?.join(", ")??"\u672A\u77E5\u66F2\u540D",J=n.find(wa)?.value?.join(", ")??"\u672A\u77E5\u6B4C\u624B";p(`${J} - ${F}`)}},g=[l,n],e[6]=l,e[7]=n,e[8]=u,e[9]=g):(u=e[8],g=e[9]),_.useLayoutEffect(u,g);let j;e[10]===Symbol.for("react.memo_cache_sentinel")?(j=t.jsx(Ee,{children:"\u63D0\u4EA4\u6B4C\u8BCD\u5230 AMLL \u6B4C\u8BCD\u6570\u636E\u5E93\uFF08\u4EC5\u7B80\u4F53\u4E2D\u6587\u7528\u6237\uFF09"}),e[10]=j):j=e[10];let i;e[11]!==c||e[12]!==r?(i=!c&&t.jsxs(t.Fragment,{children:[t.jsxs(rt,{color:"orange",children:[t.jsx(it,{children:t.jsx(Lt,{})}),t.jsx(ht,{children:"\u672C\u529F\u80FD\u4EC5\u4F7F\u7528 AMLL \u6B4C\u8BCD\u6570\u636E\u5E93\u7684\u7B80\u4F53\u4E2D\u6587\u7528\u6237\u53EF\u7528\uFF0C\u5982\u679C\u60A8\u662F\u4E3A\u4E86\u5728\u5176\u4ED6\u8F6F\u4EF6\u4E0A\u4F7F\u7528\u6B4C\u8BCD\u800C\u7F16\u8F91\u6B4C\u8BCD\u7684\u8BDD\uFF0C\u8BF7\u53C2\u8003\u5BF9\u5E94\u7684\u8F6F\u4EF6\u63D0\u4EA4\u6B4C\u8BCD\u7684\u65B9\u5F0F\u6765\u63D0\u4EA4\u6B4C\u8BCD\u54E6\uFF01"})]}),t.jsxs(rt,{color:"blue",children:[t.jsx(it,{children:t.jsx(mt,{})}),t.jsx(ht,{children:t.jsxs("p",{children:["\u9996\u5148\uFF0C\u611F\u8C22\u60A8\u7684\u6177\u6168\u6B4C\u8BCD\u8D21\u732E\uFF01",t.jsx("br",{}),"\u901A\u8FC7\u63D0\u4EA4\uFF0C\u4F60\u5C06\u9ED8\u8BA4\u540C\u610F"," ",t.jsxs(V,{weight:"bold",color:"orange",children:["\u4F7F\u7528 CC0 \u5171\u4EAB\u534F\u8BAE\u5B8C\u5168\u653E\u5F03\u6B4C\u8BCD\u6240\u6709\u6743"," "]}),"\u5E76\u63D0\u4EA4\u5230\u6B4C\u8BCD\u6570\u636E\u5E93\uFF01",t.jsx("br",{}),"\u5E76\u4E14\u6B4C\u8BCD\u5C06\u4F1A\u5728\u4EE5\u540E\u88AB AMLL \u7CFB\u7A0B\u5E8F\u4F5C\u4E3A\u9ED8\u8BA4 TTML \u6B4C\u8BCD\u6E90\u83B7\u53D6\uFF01",t.jsx("br",{}),"\u5982\u679C\u60A8\u5BF9\u6B4C\u8BCD\u6240\u6709\u6743\u6BD4\u8F83\u770B\u91CD\u7684\u8BDD\uFF0C\u8BF7\u52FF\u63D0\u4EA4\u6B4C\u8BCD\u54E6\uFF01",t.jsx("br",{}),"\u8BF7\u8F93\u5165\u4EE5\u4E0B\u63D0\u4EA4\u4FE1\u606F\u7136\u540E\u8DF3\u8F6C\u5230 Github \u8BAE\u9898\u63D0\u4EA4\u9875\u9762\uFF01"]})})]}),t.jsx(Ae,{variant:"soft",size:"1",onClick:()=>r(!0),children:"\u5173\u95ED\u4E0A\u8FF0\u8B66\u544A\u4FE1\u606F"})]}),e[11]=c,e[12]=r,e[13]=i):i=e[13];let L;e[14]!==h?(L=F=>h(!!F),e[14]=h,e[15]=L):L=e[15];let O;e[16]!==l||e[17]!==L?(O=t.jsx(V,{as:"label",size:"2",children:t.jsxs(Y,{gap:"2",children:[t.jsx(Ol,{checked:l,onCheckedChange:L}),"\u4ECE\u5143\u6570\u636E\u4E2D\u751F\u6210"]})}),e[16]=l,e[17]=L,e[18]=O):O=e[18];let M;e[19]===Symbol.for("react.memo_cache_sentinel")?(M=F=>p(F.currentTarget.value),e[19]=M):M=e[19];let T;e[20]!==l||e[21]!==o?(T=t.jsx(V,{as:"label",size:"2",children:t.jsxs(Y,{direction:"column",gap:"2",children:["\u97F3\u4E50\u540D\u79F0",t.jsx(fe,{value:o,disabled:l,onChange:M}),"\u63A8\u8350\u4F7F\u7528 \u6B4C\u624B - \u6B4C\u66F2 \u683C\u5F0F\uFF0C\u65B9\u4FBF\u4ED3\u5E93\u7BA1\u7406\u5458\u786E\u8BA4\u4F60\u7684\u6B4C\u66F2\u662F\u5426\u5B58\u5728"]})}),e[20]=l,e[21]=o,e[22]=T):T=e[22];let k,Z;e[23]===Symbol.for("react.memo_cache_sentinel")?(Z=t.jsx(Ht,{value:"\u65B0\u6B4C\u8BCD\u63D0\u4EA4",children:"\u65B0\u6B4C\u8BCD\u63D0\u4EA4"}),k=t.jsx(Ht,{value:"\u4FEE\u6B63\u5DF2\u6709\u6B4C\u8BCD",children:"\u4FEE\u6B63\u5DF2\u6709\u6B4C\u8BCD"}),e[23]=k,e[24]=Z):(k=e[23],Z=e[24]);let y;e[25]!==x?(y=t.jsx(V,{as:"label",size:"2",children:t.jsxs(Y,{direction:"column",gap:"2",children:["\u63D0\u4EA4\u7F18\u7531",t.jsxs(El,{value:x,onValueChange:R,children:[Z,k]})]})}),e[25]=x,e[26]=y):y=e[26];let q;e[27]===Symbol.for("react.memo_cache_sentinel")?(q=F=>f(F.currentTarget.value),e[27]=q):q=e[27];let z;e[28]!==v?(z=t.jsx(V,{as:"label",size:"2",children:t.jsxs(Y,{direction:"column",gap:"2",children:["\u5907\u6CE8",t.jsx(zt,{resize:"vertical",placeholder:"\u6709\u4EC0\u4E48\u9700\u8981\u8865\u5145\u8BF4\u660E\u7684\u5462\uFF1F",value:v,onChange:q})]})}),e[28]=v,e[29]=z):z=e[29];let K;e[30]!==m?(K=m.length>0&&t.jsxs(rt,{color:"red",children:[t.jsx(it,{children:t.jsx(Lt,{})}),t.jsxs(ht,{children:["\u53D1\u73B0\u4EE5\u4E0B\u95EE\u9898\uFF0C\u8BF7\u4FEE\u6B63\u540E\u518D\u63D0\u4EA4\uFF1A",t.jsx("ul",{children:m.map(_a)})]})]}),e[30]=m,e[31]=K):K=e[31];const le=m.length>0;let G;e[32]!==d||e[33]!==le||e[34]!==A?(G=t.jsx(Ae,{loading:d,disabled:le,onClick:A,children:"\u4E0A\u4F20\u6B4C\u8BCD\u5E76\u521B\u5EFA\u8BAE\u9898"}),e[32]=d,e[33]=le,e[34]=A,e[35]=G):G=e[35];let B;e[36]!==y||e[37]!==z||e[38]!==K||e[39]!==G||e[40]!==i||e[41]!==O||e[42]!==T?(B=t.jsxs(Fe,{"aria-description":"\u63D0\u4EA4\u6B4C\u8BCD\u5230 AMLL \u6B4C\u8BCD\u6570\u636E\u5E93",children:[j,t.jsxs(Y,{direction:"column",gap:"4",children:[i,O,T,y,z,K,G]})]}),e[36]=y,e[37]=z,e[38]=K,e[39]=G,e[40]=i,e[41]=O,e[42]=T,e[43]=B):B=e[43];let te;return e[44]!==a||e[45]!==s||e[46]!==B?(te=t.jsx($e,{open:a,onOpenChange:s,children:B}),e[44]=a,e[45]=s,e[46]=B,e[47]=te):te=e[47],te});function fa(e){return e.status!==200?Promise.reject(new Error(`\u53D1\u9001\u4E0A\u4F20\u6B4C\u8BCD\u6587\u4EF6\u8BF7\u6C42\u5931\u8D25\uFF1A${e.status} ${e.statusText}`)):e.text()}function ya(e){return e.key==="musicName"}function wa(e){return e.key==="artists"}function _a(e){return t.jsx("li",{children:e},e)}globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,a){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,a),a)}},globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,a){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,a),a)}};const st=e=>{const a=pe.c(2),{enable:s}=e,c=s?"var(--accent-11)":"var(--accent-a5)";let r;return a[0]!==c?(r=t.jsx("div",{style:{width:"2em",height:"2em",borderRadius:"50%",boxShadow:"var(--shadow-2)",backgroundColor:c}}),a[0]=c,a[1]=r):r=a[1],r},va=_.memo(()=>{const e=pe.c(57),[a,s]=W($l),[c,r]=W(Nl),[l,h]=_.useState(!1),[n,m]=_.useState(-1),[o,p]=_.useState(null),v=ct(Gt),f=_.useRef(0),d=_.useRef(0);let P;e[0]===Symbol.for("react.memo_cache_sentinel")?(P=[],e[0]=P):P=e[0];const x=_.useRef(P),R=_.useRef(null),I=1e3/(c/60);let b,A;e[1]!==I||e[2]!==a||e[3]!==l?(b=()=>{if(!l||!a){m(-1);return}p(null);let ee;ee=!1;const S=R.current;if(!S)return;S.width=S.clientWidth*window.devicePixelRatio,S.height=S.clientHeight*window.devicePixelRatio;const ae=(S.width-2*window.devicePixelRatio)/2,D=S.getContext("2d");if(D)return x.current=[],(async()=>{const re=Aa,w=Ca;let C=0;const N=I/1e3;d.current=Le.ctxCurrentTime,f.current=d.current,Le.playNode(re(),d.current,d.current+.05),m(0);let H=null;for(;!ee;){const ue=Le.ctxCurrentTime;ue>=f.current&&(m(C),H=++C%4===0?re():w(),C=C%4,d.current=f.current,f.current=ue+N,Le.playNode(H,f.current,f.current+.05)),D.clearRect(0,0,S.width,S.height),D.fillStyle="rgba(255, 0, 0, 0.1)";for(const Te of x.current){const ze=Te/N*S.width;D.fillRect(ae+ze,0,2*window.devicePixelRatio,S.height)}D.fillStyle="green",D.fillRect(ae,0,2*window.devicePixelRatio,S.height);const je=(d.current-ue)/N;D.fillStyle="yellow",D.fillRect(ae+je*S.width,0,window.devicePixelRatio,S.height);const _e=(f.current-ue)/N;D.fillStyle="yellow",D.fillRect(ae+_e*S.width,0,window.devicePixelRatio,S.height),await new Promise(Ta)}H?.stop()})(),()=>{ee=!0}},A=[l,a,I],e[1]=I,e[2]=a,e[3]=l,e[4]=b,e[5]=A):(b=e[4],A=e[5]),_.useEffect(b,A);let u;e[6]!==l||e[7]!==v?(u=ee=>{if(!l)return;const S=Le.ctxCurrentTime,ae=Le.ctxOutputLatency;let D=S+ae;e:switch(v){case Ne.FirstKeyDownTime:{D=D-ee.downTimeOffset/1e3;break e}case Ne.LastKeyUpTime:break e;case Ne.MiddleKeyTime:D=D-ee.downTimeOffset/2e3}console.log("hitTime",{hitTime:D,currentTime:S,outputLatency:ae});const re=d.current-D,w=f.current-D;let C;C=0,Math.abs(re)<Math.abs(w)?C=re:C=w,x.current.push(C),x.current.length>100&&x.current.shift(),p(N=>{const H=C*1e3|0;return N===null?{cur:H,min:H,max:H}:{cur:H,min:Math.min(N.min,H),max:Math.max(N.max,H)}})},e[6]=l,e[7]=v,e[8]=u):u=e[8];let g;e[9]!==l?(g=[l],e[9]=l,e[10]=g):g=e[10],Fl(Kt,u,g);let j;e[11]===Symbol.for("react.memo_cache_sentinel")?(j=t.jsx(Ee,{children:"\u6253\u8F74\u5EF6\u8FDF\u6D4B\u8BD5"}),e[11]=j):j=e[11];let i;e[12]===Symbol.for("react.memo_cache_sentinel")?(i=t.jsx(V,{children:"\u8BF7\u9009\u62E9\u81EA\u5DF1\u559C\u6B22\u7684 BPM\uFF0C\u5E76\u5728\u6BCF\u4E2A\u8702\u9E23\u58F0\u54CD\u8D77\u65F6\u6309\u4E0B\u6253\u8F74\u6309\u952E\uFF0C\u4EE5\u6D4B\u91CF\u97F3\u9891/\u8F93\u5165\u5EF6\u8FDF\u5DEE"}),e[12]=i):i=e[12];let L;e[13]===Symbol.for("react.memo_cache_sentinel")?(L={alignSelf:"center"},e[13]=L):L=e[13];const O=n===0;let M;e[14]!==O?(M=t.jsx(st,{enable:O}),e[14]=O,e[15]=M):M=e[15];const T=n===1;let k;e[16]!==T?(k=t.jsx(st,{enable:T}),e[16]=T,e[17]=k):k=e[17];const Z=n===2;let y;e[18]!==Z?(y=t.jsx(st,{enable:Z}),e[18]=Z,e[19]=y):y=e[19];const q=n===3;let z;e[20]!==q?(z=t.jsx(st,{enable:q}),e[20]=q,e[21]=z):z=e[21];let K;e[22]!==k||e[23]!==y||e[24]!==z||e[25]!==M?(K=t.jsxs(Y,{gap:"6",my:"6",style:L,children:[M,k,y,z]}),e[22]=k,e[23]=y,e[24]=z,e[25]=M,e[26]=K):K=e[26];let le;e[27]===Symbol.for("react.memo_cache_sentinel")?(le={alignSelf:"center"},e[27]=le):le=e[27];const G=o===null?"\u6700\u5FEB\u5EF6\u8FDF":`${o.max}ms`;let B;e[28]!==G?(B=t.jsx(V,{children:G}),e[28]=G,e[29]=B):B=e[29];const te=o===null?"gray":o.cur>0?"blue":o.cur<0?"red":"green",F=o===null?"\u672A\u6D4B\u91CF":o.cur>0?`\u5FEB ${o.cur}ms`:o.cur<0?`\u6162 ${o.cur}ms`:"\u5B8C\u7F8E 0ms";let J;e[30]!==te||e[31]!==F?(J=t.jsx(V,{color:te,children:F}),e[30]=te,e[31]=F,e[32]=J):J=e[32];const ge=o===null?"\u6700\u6162\u5EF6\u8FDF":`${-o.min}ms`;let $;e[33]!==ge?($=t.jsx(V,{children:ge}),e[33]=ge,e[34]=$):$=e[34];let he;e[35]!==B||e[36]!==J||e[37]!==$?(he=t.jsxs(Y,{gap:"4",style:le,children:[B,J,$]}),e[35]=B,e[36]=J,e[37]=$,e[38]=he):he=e[38];let xe;e[39]===Symbol.for("react.memo_cache_sentinel")?(xe=t.jsx("canvas",{style:{width:"14em",height:"1em",margin:"1em",borderRadius:"var(--radius-2)",boxShadow:"var(--shadow-2)",alignSelf:"center"},ref:R}),e[39]=xe):xe=e[39];let Q;e[40]!==r?(Q=ee=>r(ee.target.valueAsNumber),e[40]=r,e[41]=Q):Q=e[41];let se;e[42]!==c||e[43]!==Q?(se=t.jsx(V,{as:"label",size:"2",children:t.jsxs(Y,{direction:"column",gap:"2",children:["\u8282\u62CD BPM",t.jsx(fe,{type:"number",min:60,max:320,value:c,onChange:Q})]})}),e[42]=c,e[43]=Q,e[44]=se):se=e[44];let me;e[45]===Symbol.for("react.memo_cache_sentinel")?(me=()=>h(Sa),e[45]=me):me=e[45];const ce=l?"\u7ED3\u675F":"\u5F00\u59CB";let ne;e[46]!==ce?(ne=t.jsx(Y,{gap:"2",children:t.jsx(Ae,{onClick:me,children:ce})}),e[46]=ce,e[47]=ne):ne=e[47];let X;e[48]!==K||e[49]!==he||e[50]!==se||e[51]!==ne?(X=t.jsxs(Fe,{children:[j,t.jsxs(Y,{direction:"column",gap:"2",children:[i,K,he,xe,se,ne]})]}),e[48]=K,e[49]=he,e[50]=se,e[51]=ne,e[52]=X):X=e[52];let de;return e[53]!==a||e[54]!==s||e[55]!==X?(de=t.jsx($e,{open:a,onOpenChange:s,children:X}),e[53]=a,e[54]=s,e[55]=X,e[56]=de):de=e[56],de});function Aa(){const e=Le.ctx.createOscillator();return e.type="sine",e.frequency.value=880,e}function Ca(){const e=Le.ctx.createOscillator();return e.type="sine",e.frequency.value=440,e}function Ta(e){return requestAnimationFrame(e)}function Sa(e){return!e}const La="_word_1jbq4_1",Ma={word:La};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,a){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,a),a)}},globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,a){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,a),a)}};const ka=_.memo(()=>{const[e,a]=W(Zl),[s,c]=kt(Bl),r=Nt(qe),[l,h]=_.useState("\\"),n=_.useMemo(()=>s.word.split(l),[l,s.word]);return t.jsx($e,{open:e,onOpenChange:a,children:t.jsxs(Fe,{children:[t.jsx(Ee,{children:"\u62C6\u5206/\u66FF\u6362\u5355\u8BCD"}),t.jsxs(Y,{direction:"column",gap:"2",children:[t.jsxs(rt,{color:"blue",children:[t.jsx(it,{children:t.jsx(mt,{})}),t.jsx(ht,{children:"\u62C6\u5206\u540E\u65B0\u5355\u8BCD\u5C06\u4F1A\u6309\u81EA\u8EAB\u5355\u8BCD\u5B57\u7B26\u5E73\u5747\u5206\u914D\u539F\u5355\u8BCD\u7684\u59CB\u672B\u65F6\u95F4\uFF0C\u5982\u6709\u7A7A\u62CD\u5219\u4F1A\u88AB\u6E05\u9664"})]}),t.jsx(V,{children:"\u62C6\u5206/\u66FF\u6362\u6A21\u677F"}),t.jsx(fe,{value:s.word,onChange:m=>c(o=>{o.word=m.target.value})}),t.jsx(V,{mt:"4",children:"\u5206\u9694\u7B26"}),t.jsx(fe,{value:l,onChange:m=>h(m.target.value)}),t.jsx(zl,{size:"4",my:"2"}),t.jsx(V,{children:"\u62C6\u5206\u9884\u89C8"}),t.jsx(Y,{gap:"1",wrap:"wrap",mb:"4",children:n.map((m,o)=>t.jsx("span",{className:Ma.word,children:m.trim()===""?t.jsx(V,{color:"gray",children:m.length>0?`\u7A7A\u683Cx${m.length}`:"\u7A7A\u767D"}):m},`preview-word-${o}-${m}`))})]}),t.jsx(Vl,{children:t.jsx(Ae,{onClick:()=>{r(m=>{const o=m.lyricLines[s.lineIndex];if(o){const p=o.words[s.wordIndex];if(p){const v=p.startTime,f=(p.endTime-v)/n.length,d=n.map((P,x)=>({...vt(),startTime:v+f*x|0,endTime:v+f*(x+1)|0,word:P}));o.words.splice(s.wordIndex,1,...d)}}})},children:"\u62C6\u5206/\u66FF\u6362"})})]})})});globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,a){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,a),a)}},globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,a){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,a),a)}},St=()=>{const e=pe.c(1);let a;return e[0]===Symbol.for("react.memo_cache_sentinel")?(a=t.jsxs(t.Fragment,{children:[t.jsx(aa,{}),t.jsx(ia,{}),t.jsx(ja,{}),t.jsx(ka,{}),t.jsx(pa,{}),t.jsx(va,{})]}),e[0]=a):a=e[0],a}});export{St as Dialogs,Gl as __tla,St as default};
